/* static/styles.css */
@import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap");

/* =========================
   Theme
========================= */
:root{
  color-scheme: dark;

  --bg0:#051412;
  --bg1:#0a1e1a;

  --card:rgba(16,34,31,.72);
  --card2:rgba(16,34,31,.56);

  --text:#e7f0ee;
  --muted:rgba(172,193,188,.72);
  --line:rgba(93,122,114,.35);

  --brand:#0df2cc;
  --brand2:#f59e0b;
  --brand3:#22c55e;

  --good:#34d399;
  --bad:#FF4D7D;
  --warn:#f59e0b;

  --shadow: 0 18px 44px rgba(0,0,0,.38);
  --r: 14px;
  --r2: 14px;

  --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  --sans: "Inter", "Avenir Next", "Montserrat", "Poppins", "Segoe UI", Helvetica, Arial, sans-serif;

  --modal-bg: rgba(16,34,31,.84);
  --field-bg: rgba(255,255,255,.04);
  --field-border: rgba(13,242,204,.22);
  --focus: rgba(13,242,204,.52);
  --backdrop: rgba(0,0,0,.58);
}

[hidden]{
  display:none !important;
}

/* =========================================
   View-based navigation + contextual help
========================================= */
body.page-index .topbar{
  position:sticky;
  top:0;
  z-index:220;
}

body.page-index .brand-title{
  display:flex;
  align-items:center;
  gap:12px;
}

body.page-index .brand-mark{
  width:44px;
  height:44px;
  border-radius:12px;
  display:grid;
  place-items:center;
  color:#062b23;
  background:linear-gradient(145deg, #2bf0d4, #f7b42c);
  box-shadow:0 8px 20px rgba(0,0,0,.22);
}

body.page-index .brand-mark svg{
  width:24px;
  height:24px;
}

body.page-index .brand-sub{
  margin:2px 0 0;
  font-size:12px;
  color:var(--muted);
}

body.page-index .top-actions-compact{
  margin-left:auto;
  display:flex;
  align-items:center;
  gap:10px;
  flex-wrap:wrap;
  justify-content:flex-end;
}

body.page-index .top-actions-compact .btn{
  min-height:42px;
}

body.page-index .app-shell{
  display:grid;
  gap:14px;
}

body.page-index .app-view{
  display:none;
}

body.page-index .app-view.is-active{
  display:block;
}

body.page-index .view-nav{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  padding:10px;
}

body.page-index .view-tab{
  border:1px solid var(--line);
  border-radius:999px;
  min-height:40px;
  padding:0 14px;
  font-size:13px;
  font-weight:700;
  color:var(--muted);
  background:rgba(255,255,255,.04);
  cursor:pointer;
}

body.page-index .view-tab.is-active{
  background:linear-gradient(145deg, rgba(13,242,204,.96), rgba(247,180,44,.92));
  color:#082823;
  border-color:rgba(13,242,204,.65);
}

body.page-index .summary-headline{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  margin-bottom:8px;
  color:var(--text);
  font-size:14px;
}

body.page-index .home-quick{
  margin-top:12px;
  padding:14px;
  border:1px solid var(--line);
}

body.page-index .home-quick-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
}

body.page-index .home-quick-head h3{
  margin:0;
  font-size:18px;
}

body.page-index .home-quick-actions{
  margin-top:10px;
  display:grid;
  grid-template-columns:repeat(2, minmax(0, 1fr));
  gap:10px;
}

body.page-index .home-quick-actions .btn{
  min-height:44px;
  justify-content:center;
}

body.page-index .data-hub{
  border:1px solid var(--line);
  padding:14px;
}

body.page-index .data-hub-head h2{
  margin:0;
  font-size:22px;
  display:flex;
  align-items:center;
  gap:8px;
}

body.page-index .data-hub-head p{
  margin:6px 0 0;
  color:var(--muted);
  font-size:13px;
}

body.page-index .data-hub-grid{
  margin-top:12px;
  display:grid;
  grid-template-columns:repeat(2, minmax(0, 1fr));
  gap:10px;
}

body.page-index .data-hub-grid .btn{
  min-height:44px;
  justify-content:flex-start;
}

body.page-index .data-groups{
  margin-top:12px;
  display:grid;
  gap:12px;
}

body.page-index .data-group{
  border:1px solid var(--line);
  border-radius:12px;
  padding:10px;
  background:rgba(255,255,255,.02);
}

body.page-index .data-group h3{
  margin:0;
  font-size:13px;
  letter-spacing:.04em;
  text-transform:uppercase;
  color:var(--muted);
}

body.page-index .data-group .data-hub-grid{
  margin-top:10px;
}

body.page-index .info-dot{
  width:26px;
  height:26px;
  border-radius:999px;
  border:1px solid rgba(13,242,204,.42);
  color:#cffaf3;
  background:rgba(13,242,204,.12);
  display:grid;
  place-items:center;
  padding:0;
  font-size:12px;
  font-weight:800;
  line-height:1;
  cursor:pointer;
  flex:0 0 auto;
}

body.page-index .info-dot:hover{
  background:rgba(13,242,204,.2);
}

body.page-index .help-tip-popover{
  position:absolute;
  z-index:200;
  width:min(280px, calc(100vw - 24px));
  border-radius:12px;
  border:1px solid rgba(13,242,204,.35);
  background:rgba(6,28,24,.96);
  box-shadow:0 14px 30px rgba(0,0,0,.35);
  padding:10px;
}

body.page-index .help-tip-title{
  font-weight:800;
  font-size:13px;
  color:#e6faf6;
}

body.page-index .help-tip-text{
  margin-top:6px;
  font-size:12px;
  color:rgba(206,236,229,.88);
  white-space:pre-line;
}

body.page-index .help-tip-link{
  display:inline-flex;
  margin-top:8px;
  font-size:12px;
  font-weight:700;
  color:#38f2d6;
  text-decoration:none;
}

body.page-index .mobile-view-nav{
  display:none;
}

@media (max-width: 920px){
  body.page-index .topbar .wrap{
    padding:10px 12px;
  }

  body.page-index .brand-sub{
    display:none;
  }

  body.page-index .top-actions-compact{
    width:100%;
    margin-top:10px;
    justify-content:stretch;
  }

  body.page-index .top-actions-compact .btn{
    flex:1 1 calc(50% - 6px);
    min-height:44px;
    justify-content:center;
    padding:0 10px;
    font-size:12px;
  }

  body.page-index .view-nav{
    display:none;
  }

  body.page-index .home-quick-actions,
  body.page-index .data-hub-grid{
    grid-template-columns:1fr;
  }

  body.page-index .mobile-view-nav{
    position:fixed;
    left:8px;
    right:8px;
    bottom:8px;
    z-index:125;
    display:grid;
    grid-template-columns:repeat(5, minmax(0, 1fr));
    gap:6px;
    padding:8px;
    border:1px solid rgba(255,255,255,.12);
    border-radius:14px;
    background:rgba(6,22,19,.95);
    box-shadow:0 14px 30px rgba(0,0,0,.3);
  }

  body.page-index .mobile-view-tab{
    border:1px solid rgba(255,255,255,.12);
    border-radius:10px;
    min-height:40px;
    padding:0 8px;
    font-size:11px;
    font-weight:700;
    color:var(--muted);
    background:rgba(255,255,255,.04);
  }

  body.page-index .mobile-view-tab.is-active{
    color:#082823;
    border-color:rgba(13,242,204,.62);
    background:linear-gradient(145deg, rgba(13,242,204,.96), rgba(247,180,44,.9));
  }

  body.page-index .app-shell{
    padding-bottom:96px;
  }

  body.page-index .fab-dock{
    bottom:86px;
  }
}

:root[data-theme="light"] body.page-index .brand-sub{
  color:#5f6e85;
}

:root[data-theme="light"] body.page-index .view-tab{
  border-color:#ced7e3;
  background:#ffffff;
  color:#415169;
}

:root[data-theme="light"] body.page-index .info-dot{
  border-color:#b9c9da;
  color:#0f2e4a;
  background:#eef5fb;
}

:root[data-theme="light"] body.page-index .help-tip-popover{
  border-color:#bfd4e4;
  background:#f8fcff;
}

:root[data-theme="light"] body.page-index .help-tip-title{
  color:#153049;
}

:root[data-theme="light"] body.page-index .help-tip-text{
  color:#3f5672;
}

:root[data-theme="light"] body.page-index .help-tip-link{
  color:#0f766e;
}

:root[data-theme="light"] body.page-index .mobile-view-nav{
  background:#ffffff;
  border-color:#d5deea;
}

:root[data-theme="light"] body.page-index .mobile-view-tab{
  border-color:#d4deea;
  background:#f4f8fc;
  color:#425774;
}

@media (max-width: 920px){
  body.page-index .plan-hub{
    padding:12px;
  }

  body.page-index .plan-hub-head{
    flex-direction:column;
    align-items:stretch;
  }

  body.page-index .plan-title-row{
    flex-wrap:wrap;
  }

  body.page-index .plan-hub-head .plan-head-sub{
    white-space:normal;
    overflow:visible;
    text-overflow:unset;
  }

  body.page-index .plan-hub-tools{
    width:100%;
    justify-content:stretch;
  }

  body.page-index .plan-hub-tools .field{
    min-width:0;
    flex:1 1 160px;
  }

  body.page-index .plan-hub-tools .btn{
    flex:1 1 140px;
    justify-content:center;
  }

  body.page-index .plan-cards{
    grid-template-columns:1fr;
  }

  body.page-index .plan-adherence-grid{
    grid-template-columns:1fr;
  }

  body.page-index .plan-adherence-actions{
    flex-direction:column;
    align-items:flex-start;
  }

  body.page-index .plan-adherence-history-head{
    flex-direction:column;
    align-items:stretch;
  }

  body.page-index .plan-adherence-history-head .field{
    min-width:0;
  }
}

/* ---------- Performance chart + quick report ---------- */
body.page-index .performance{
  margin-top:12px;
  padding:14px 16px;
  border:1px solid rgba(13,242,204,.18);
  border-radius:14px;
  background:
    radial-gradient(120% 140% at 100% 0%, rgba(13,242,204,.08), transparent 55%),
    linear-gradient(180deg, rgba(8,30,26,.70), rgba(6,20,18,.58));
}

body.page-index .performance-head{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
}

body.page-index .performance-title-row{
  display:flex;
  align-items:center;
  gap:10px;
  flex-wrap:nowrap;
  min-width:0;
}

body.page-index .performance-tools{
  display:flex;
  flex-wrap:wrap;
  justify-content:flex-end;
  gap:8px;
}

body.page-index .performance-tools .btn{
  height:34px;
  padding:0 10px;
  font-size:12px;
}

body.page-index .performance-head h3{
  margin:0;
  font-size:18px;
  letter-spacing:-.01em;
  color:#e9f7f3;
}

body.page-index .performance-head p{
  margin:0;
  font-size:12px;
  color:rgba(174,210,202,.74);
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

body.page-index .sr-only{
  position:absolute;
  width:1px;
  height:1px;
  padding:0;
  margin:-1px;
  overflow:hidden;
  clip:rect(0,0,0,0);
  white-space:nowrap;
  border:0;
}

body.page-index .performance-controls-row{
  margin-top:10px;
  display:flex;
  align-items:center;
  gap:12px;
  flex-wrap:wrap;
}

body.page-index .performance-mode-field{
  min-width:0;
  text-align:right;
  margin-left:auto;
  flex:0 0 clamp(280px, 22vw, 390px);
  width:clamp(280px, 22vw, 390px);
}

body.page-index .performance-mode-field .limit-select{
  width:57%;
  min-width:190px;
  max-width:300px;
}

body.page-index .performance-range{
  margin-top:8px;
  display:flex;
  flex-wrap:wrap;
  justify-content:flex-end;
  align-items:flex-end;
  gap:10px;
}

body.page-index .performance-range .field{
  min-width:180px;
  flex:1 1 220px;
}

body.page-index .performance-range .limit-select{
  width:100%;
  min-width:0;
}

body.page-index .performance-range-fields{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  flex:2 1 380px;
}

body.page-index .performance-range-fields .field{
  min-width:160px;
  flex:1 1 180px;
}

body.page-index .performance-range .btn{
  min-height:42px;
}

body.page-index .performance-metrics{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  margin-top:0;
  flex:1 1 auto;
  min-width:0;
}

body.page-index .performance-metrics .chip{
  border-radius:999px;
  border:1px solid rgba(255,255,255,.14);
  background:rgba(255,255,255,.04);
  color:#cae5df;
  font-size:12px;
  padding:6px 10px;
  cursor:pointer;
}

body.page-index .performance-metrics .chip.active{
  color:#02251f;
  border-color:#23e6ce;
  background:#23e6ce;
}

body.page-index .performance-chart-wrap{
  margin-top:10px;
  border:1px solid rgba(255,255,255,.11);
  border-radius:12px;
  background:rgba(2,12,10,.32);
  padding:10px 6px 6px;
  position:relative;
  width:100%;
  box-sizing:border-box;
}

body.page-index #perfChart{
  width:100%;
  height:auto;
  aspect-ratio:1000 / 260;
  display:block;
}

body.page-index .performance-empty{
  position:absolute;
  inset:0;
  display:grid;
  place-items:center;
  color:rgba(177,210,202,.72);
  font-size:13px;
}

body.page-index .performance-foot{
  margin-top:10px;
  font-size:13px;
  color:#b7d5ce;
  text-align:center;
}

body.page-index #perfChart .chart-grid{
  stroke:rgba(255,255,255,.14);
  stroke-width:1;
}

body.page-index #perfChart .chart-line{
  fill:none;
  stroke:#20e3c6;
  stroke-width:4;
  stroke-linecap:round;
  stroke-linejoin:round;
}

body.page-index #perfChart .chart-area{
  fill:rgba(32,227,198,.18);
}

body.page-index #perfChart .chart-dot{
  fill:#fbbf24;
  stroke:#032620;
  stroke-width:2.2;
  cursor:pointer;
  transition:stroke-width .12s ease;
}

body.page-index #perfChart .chart-dot:focus{
  outline:none;
}

body.page-index #perfChart .chart-dot.is-active{
  stroke:#eafff9;
  stroke-width:3.4;
}

body.page-index #perfChart .chart-x{
  fill:rgba(190,221,213,.82);
  font-size:14px;
  letter-spacing:.01em;
}

body.page-index #perfChart .chart-y{
  fill:rgba(190,221,213,.92);
  font-size:12px;
  letter-spacing:.01em;
}

body.page-index .chart-point-tooltip{
  position:absolute;
  z-index:8;
  min-width:168px;
  max-width:260px;
  padding:8px 10px;
  border-radius:10px;
  border:1px solid rgba(33,235,205,.4);
  background:rgba(2,24,20,.94);
  color:#e7fbf6;
  box-shadow:0 12px 28px rgba(1,11,10,.34);
  pointer-events:none;
}

body.page-index .chart-point-tooltip[hidden]{
  display:none;
}

body.page-index .chart-point-tooltip::after{
  content:"";
  position:absolute;
  left:50%;
  transform:translateX(-50%);
  border-left:7px solid transparent;
  border-right:7px solid transparent;
}

body.page-index .chart-point-tooltip[data-place="above"]::after{
  top:100%;
  border-top:7px solid rgba(2,24,20,.94);
}

body.page-index .chart-point-tooltip[data-place="below"]::after{
  bottom:100%;
  border-bottom:7px solid rgba(2,24,20,.94);
}

body.page-index .chart-point-tooltip-date{
  font-size:11px;
  color:rgba(204,235,227,.88);
  margin-bottom:4px;
}

body.page-index .chart-point-tooltip-value{
  font-size:12px;
  font-weight:800;
  color:#f4fffc;
}

body.page-index .chart-point-tooltip-delta{
  margin-top:4px;
  font-size:11px;
  color:#b7eadf;
}

/* ---------- Plan hub (Planes) ---------- */
body.page-index .plan-hub{
  margin-top:12px;
  padding:14px 16px;
  border:1px solid rgba(13,242,204,.18);
  border-radius:14px;
  background:
    radial-gradient(120% 140% at 100% 0%, rgba(13,242,204,.08), transparent 55%),
    linear-gradient(180deg, rgba(8,30,26,.70), rgba(6,20,18,.58));
}

body.page-index .plan-hub-head{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
}

body.page-index .plan-title-row{
  display:flex;
  align-items:center;
  gap:10px;
  min-width:0;
  flex:1 1 auto;
}

body.page-index .plan-hub-head h3{
  margin:0;
  font-size:20px;
  color:#e9f7f3;
  letter-spacing:-.01em;
  white-space:nowrap;
}

body.page-index .plan-hub-head .plan-head-sub{
  margin:0;
  color:rgba(174,210,202,.76);
  font-size:12px;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

body.page-index .plan-hub-tools{
  display:flex;
  align-items:flex-end;
  flex-wrap:wrap;
  justify-content:flex-end;
  gap:8px;
}

body.page-index .plan-hub-tools .field{
  min-width:170px;
}

body.page-index .plan-hub-tools .field label{
  font-size:11px;
}

body.page-index .plan-hub-tools .field input{
  height:34px;
}

body.page-index .plan-hub-tools .btn{
  height:34px;
  padding:0 10px;
  font-size:12px;
}

body.page-index #btnPlanHubImport.plan-builder-cta{
  min-height:34px;
  height:auto;
  padding:8px 14px;
  justify-content:center;
  text-align:center;
  line-height:1.2;
  white-space:normal;
  border-color:rgba(248,113,113,.55);
  background:linear-gradient(135deg, #ef4444 0%, #dc2626 55%, #b91c1c 100%);
  color:#fff5f5;
  box-shadow:0 14px 24px rgba(127,29,29,.28);
}

body.page-index #btnPlanHubImport.plan-builder-cta:hover{
  border-color:rgba(252,165,165,.72);
  background:linear-gradient(135deg, #f05252 0%, #dc2626 52%, #991b1b 100%);
}

body.page-index .plan-cards{
  margin-top:12px;
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}

body.page-index .plan-card{
  border:1px solid rgba(255,255,255,.12);
  background:rgba(1,16,14,.34);
  border-radius:12px;
  padding:11px;
}

body.page-index .plan-card-head{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:8px;
}

body.page-index .plan-card-head h4{
  margin:0;
  font-size:15px;
  color:#e4f4ef;
}

body.page-index .plan-macros{
  margin-top:8px;
  display:flex;
  flex-wrap:wrap;
  gap:6px;
  font-size:12px;
}

body.page-index .plan-macro-chip{
  display:inline-flex;
  align-items:center;
  gap:4px;
  padding:4px 10px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(255,255,255,.06);
  color:#d9ece7;
  line-height:1.2;
}

body.page-index .plan-macro-chip-label{
  font-weight:700;
}

body.page-index .plan-macro-chip-value{
  font-weight:600;
}

body.page-index .plan-macro-empty{
  color:#b9e0d6;
}

body.page-index .plan-meals,
body.page-index .plan-workout-list{
  margin-top:9px;
  display:grid;
  gap:7px;
}

body.page-index .plan-meal-item{
  padding:7px 8px;
  border:1px solid rgba(255,255,255,.1);
  border-radius:9px;
  background:rgba(255,255,255,.03);
  font-size:12.5px;
  color:#d7ece7;
}

body.page-index .plan-empty{
  padding:8px;
  border:1px dashed rgba(255,255,255,.16);
  border-radius:9px;
  color:rgba(181,211,204,.78);
  font-size:12px;
}

body.page-index .plan-session{
  padding:8px;
  border:1px solid rgba(255,255,255,.09);
  border-radius:10px;
  background:rgba(255,255,255,.03);
}

body.page-index .plan-session-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:7px;
  margin-bottom:7px;
}

body.page-index .plan-session-badges{
  display:flex;
  gap:7px;
  flex-wrap:wrap;
}

body.page-index .plan-session-delete-btn{
  height:30px;
  font-size:11px;
  padding:0 9px;
  white-space:nowrap;
}

body.page-index .plan-ex-list{
  margin:0;
  padding-left:16px;
  display:grid;
  gap:6px;
}

body.page-index .plan-ex-list li{
  color:#d7ece7;
  font-size:12.5px;
}

body.page-index .plan-ex-note{
  margin-top:2px;
  color:rgba(164,204,195,.8);
  font-size:11px;
}

body.page-index .plan-session-meta{
  margin-top:7px;
  display:grid;
  gap:4px;
  color:rgba(177,213,205,.82);
  font-size:12px;
}

body.page-index .plan-actions{
  margin-top:10px;
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  justify-content:flex-end;
}

body.page-index .plan-actions .btn{
  height:32px;
  font-size:12px;
  padding:0 10px;
}

body.page-index .plan-adherence{
  margin-top:12px;
  border-top:1px solid rgba(255,255,255,.11);
  padding-top:10px;
}

body.page-index .plan-adherence-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:8px;
}

body.page-index .plan-adherence-grid .span-all{
  grid-column:1/-1;
}

body.page-index .plan-adherence-actions{
  margin-top:8px;
  display:flex;
  gap:10px;
  align-items:center;
  justify-content:space-between;
}

body.page-index .plan-adherence-actions .btn{
  height:34px;
  font-size:12px;
  padding:0 12px;
}

body.page-index .plan-adherence-history{
  margin-top:10px;
  border:1px solid rgba(255,255,255,.11);
  border-radius:10px;
  background:rgba(255,255,255,.03);
  padding:10px;
  display:grid;
  gap:8px;
}

body.page-index .plan-adherence-history-head{
  display:flex;
  align-items:flex-end;
  justify-content:space-between;
  gap:10px;
}

body.page-index .plan-adherence-history-head strong{
  font-size:13px;
  color:#dff2ec;
}

body.page-index .plan-adherence-history-head .field{
  min-width:170px;
}

body.page-index .plan-adherence-history-head .field label{
  font-size:11px;
}

body.page-index .plan-adherence-history-head select{
  height:36px;
  padding:0 34px 0 12px;
  line-height:1.1;
  background-position:
    calc(100% - 18px) 50%,
    calc(100% - 12px) 50%;
}

body.page-index .plan-adherence-week{
  font-size:12px;
  color:rgba(188,220,212,.9);
}

body.page-index .plan-adherence-history-meta{
  color:rgba(177,213,205,.88);
  font-size:11.5px;
}

body.page-index .plan-adherence-history-list{
  display:grid;
  gap:7px;
  max-height:210px;
  overflow:auto;
  padding-right:3px;
}

body.page-index .plan-adherence-item{
  border:1px solid rgba(255,255,255,.1);
  border-radius:9px;
  background:rgba(255,255,255,.04);
  padding:7px 8px;
  display:grid;
  gap:4px;
}

body.page-index .plan-adherence-item-head{
  display:flex;
  justify-content:space-between;
  gap:8px;
  font-size:11px;
  color:rgba(189,219,212,.86);
}

body.page-index .plan-adherence-item-body{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  font-size:12px;
  color:#dff2ec;
}

body.page-index .plan-adherence-item-note{
  font-size:11.5px;
  color:rgba(176,207,200,.86);
  line-height:1.35;
}

body.page-index .plan-disclaimer{
  margin:10px 0 0;
  font-size:12px;
  color:rgba(169,204,196,.84);
}

.plan-import-body{
  display:grid;
  gap:16px;
}

.plan-import-legal{
  background:rgba(255,94,94,.06);
  border-color:rgba(248,113,113,.34);
}

.plan-import-legal .plan-disclaimer{
  margin:0;
  font-size:12px;
  line-height:1.45;
  color:rgba(236,244,241,.95);
}

.plan-import-block{
  border:1px solid rgba(255,255,255,.12);
  border-radius:12px;
  padding:12px 12px 14px;
  background:rgba(255,255,255,.03);
}

.plan-import-block h4{
  margin:0 0 8px;
  font-size:14px;
}

.plan-import-block .import-links{
  margin:2px 0 10px;
}

.plan-import-block .field{
  margin-bottom:10px;
}

.plan-import-block .btn{
  height:34px;
  font-size:12px;
  margin-top:2px;
}

.plan-import-assets{
  display:flex;
  align-items:center;
  gap:8px;
  flex-wrap:wrap;
}

.plan-import-assets .btn{
  height:34px;
  font-size:12px;
}

/* Light theme tweaks for plan hub */
:root[data-theme="light"] body.page-index .plan-hub{
  border-color:#cfe2ef;
  background:
    radial-gradient(120% 140% at 100% 0%, rgba(32,180,157,.10), transparent 55%),
    linear-gradient(180deg, #f8fcff, #edf3fa);
}

:root[data-theme="light"] body.page-index .plan-hub-head h3{
  color:#15243a;
}

:root[data-theme="light"] body.page-index .plan-hub-head .plan-head-sub{
  color:#4f617f;
}

:root[data-theme="light"] body.page-index .plan-card{
  border-color:#d7e4f1;
  background:#ffffff;
}

:root[data-theme="light"] body.page-index .plan-card-head h4{
  color:#1d2d45;
}

:root[data-theme="light"] body.page-index .plan-macros{
  color:#3f5b85;
}

:root[data-theme="light"] body.page-index .plan-macro-chip{
  border-color:#d1deeb;
  background:#f2f8fe;
  color:#274266;
}

:root[data-theme="light"] body.page-index .plan-macro-empty{
  color:#3f5b85;
}

:root[data-theme="light"] body.page-index .plan-meal-item,
:root[data-theme="light"] body.page-index .plan-session{
  border-color:#deebf5;
  background:#f7fbff;
  color:#1f2d43;
}

:root[data-theme="light"] body.page-index .plan-empty{
  border-color:#cfdeea;
  color:#4e6284;
}

:root[data-theme="light"] body.page-index .plan-ex-list li{
  color:#1d2f47;
}

:root[data-theme="light"] body.page-index .plan-ex-note,
:root[data-theme="light"] body.page-index .plan-session-meta{
  color:#4a5f82;
}

:root[data-theme="light"] body.page-index .plan-adherence-history{
  border-color:#d6e6f1;
  background:#f7fbff;
}

:root[data-theme="light"] body.page-index .plan-adherence-history-head strong{
  color:#1f2f47;
}

:root[data-theme="light"] body.page-index .plan-adherence-week{
  color:#4a607f;
}

:root[data-theme="light"] body.page-index .plan-adherence-history-meta{
  color:#4d6282;
}

:root[data-theme="light"] body.page-index .plan-adherence-item{
  border-color:#dce9f4;
  background:#ffffff;
}

:root[data-theme="light"] body.page-index .plan-adherence-item-head{
  color:#516784;
}

:root[data-theme="light"] body.page-index .plan-adherence-item-body{
  color:#203047;
}

:root[data-theme="light"] body.page-index .plan-adherence-item-note{
  color:#4f6685;
}

:root[data-theme="light"] body.page-index .plan-disclaimer{
  color:#4a617f;
}

:root[data-theme="light"] body.page-index #btnPlanHubImport.plan-builder-cta{
  border-color:#fca5a5;
  background:linear-gradient(135deg, #ef4444 0%, #dc2626 62%, #b91c1c 100%);
  color:#fff7f7;
  box-shadow:0 12px 22px rgba(185,28,28,.24);
}

:root[data-theme="light"] body.page-index #btnPlanHubImport.plan-builder-cta:hover{
  border-color:#fecaca;
  background:linear-gradient(135deg, #f05252 0%, #dc2626 62%, #991b1b 100%);
}

/* ---------- Lightbox gallery + compare ---------- */
.lightbox-counter{
  text-align:center;
  font-size:12px;
  color:rgba(214,236,230,.75);
  margin:4px 0 0;
}

#lightboxThumbs{
  display:flex;
  justify-content:center;
  gap:8px;
  flex-wrap:wrap;
}

#lightboxThumbs .lightbox-thumb img{
  width:100%;
  height:100%;
  object-fit:cover;
}

.lightbox-compare{
  margin-top:4px;
  border:1px solid rgba(255,255,255,.14);
  border-radius:10px;
  padding:10px;
  background:rgba(1,10,9,.34);
}

.lightbox-compare-head{
  display:grid;
  grid-template-columns: auto minmax(180px, 260px) minmax(120px, auto);
  align-items:center;
  gap:10px;
  margin-bottom:8px;
  font-size:12px;
  color:#cfe8e2;
}

.compare-title{
  font-weight:800;
}

.compare-controls{
  display:flex;
  align-items:center;
  gap:8px;
  justify-self:end;
}

.compare-controls label{
  font-size:11px;
  color:rgba(214,236,230,.8);
}

.compare-controls select{
  height:34px;
  border-radius:10px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(255,255,255,.06);
  color:#eaf7f4;
  padding:0 10px;
  min-width:140px;
}

.compare-stage{
  width:min(920px, 100%);
  margin:0 auto;
  display:grid;
  grid-template-columns:repeat(2, minmax(0, 1fr));
  gap:10px;
}

.compare-pane{
  margin:0;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.14);
  background:#031915;
  padding:8px;
  display:grid;
  gap:8px;
}

.compare-pane figcaption{
  color:rgba(214,236,230,.82);
  font-size:11px;
  letter-spacing:.03em;
}

.compare-stage img{
  width:100%;
  height:auto;
  max-height:320px;
  object-fit:contain;
  display:block;
  border-radius:10px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(0,0,0,.22);
}

:root[data-theme="light"] body.page-index .performance{
  background:linear-gradient(180deg, rgba(255,255,255,.94), rgba(247,250,253,.90));
  border-color:rgba(148,163,184,.26);
}

:root[data-theme="light"] body.page-index .performance-head h3{
  color:#0f172a;
}

:root[data-theme="light"] body.page-index .performance-head p,
:root[data-theme="light"] body.page-index .performance-foot{
  color:#64748b;
}

:root[data-theme="light"] body.page-index .performance-chart-wrap{
  border-color:#dce5ef;
  background:#f8fafc;
}

:root[data-theme="light"] body.page-index .performance-metrics .chip{
  border-color:#dce5ef;
  background:#ffffff;
  color:#334155;
}

:root[data-theme="light"] body.page-index .performance-metrics .chip.active{
  color:#ffffff;
  border-color:#0f766e;
  background:#0f766e;
}

:root[data-theme="light"] body.page-index #perfChart .chart-grid{
  stroke:#dbe5ef;
}

:root[data-theme="light"] body.page-index #perfChart .chart-line{
  stroke:#0f8d80;
}

:root[data-theme="light"] body.page-index #perfChart .chart-area{
  fill:rgba(15,141,128,.16);
}

:root[data-theme="light"] body.page-index #perfChart .chart-dot{
  fill:#f59e0b;
  stroke:#ffffff;
  stroke-width:2.2;
}

:root[data-theme="light"] body.page-index #perfChart .chart-dot.is-active{
  stroke:#0f766e;
}

:root[data-theme="light"] body.page-index #perfChart .chart-x{
  fill:#64748b;
}

:root[data-theme="light"] body.page-index #perfChart .chart-y{
  fill:#475569;
}

:root[data-theme="light"] body.page-index .chart-point-tooltip{
  border-color:#cfe3ef;
  background:#ffffff;
  color:#0f172a;
  box-shadow:0 12px 24px rgba(15,23,42,.12);
}

:root[data-theme="light"] body.page-index .chart-point-tooltip[data-place="above"]::after{
  border-top-color:#ffffff;
}

:root[data-theme="light"] body.page-index .chart-point-tooltip[data-place="below"]::after{
  border-bottom-color:#ffffff;
}

:root[data-theme="light"] body.page-index .chart-point-tooltip-date{
  color:#64748b;
}

:root[data-theme="light"] body.page-index .chart-point-tooltip-value{
  color:#0f172a;
}

:root[data-theme="light"] body.page-index .chart-point-tooltip-delta{
  color:#0f766e;
}

:root[data-theme="light"] .lightbox-counter{
  color:#64748b;
}

:root[data-theme="light"] .lightbox-compare{
  border-color:#dce5ef;
  background:#ffffff;
}

:root[data-theme="light"] .lightbox-compare-head{
  color:#334155;
}

:root[data-theme="light"] .compare-controls label{
  color:#64748b;
}

:root[data-theme="light"] .compare-controls select{
  color:#0f172a;
  border-color:#dce5ef;
  background:#ffffff;
}

:root[data-theme="light"] .compare-stage{
  background:transparent;
}

:root[data-theme="light"] .compare-pane{
  border-color:#dce5ef;
  background:#f8fafc;
}

:root[data-theme="light"] .compare-pane figcaption{
  color:#475569;
}

:root[data-theme="light"] .compare-stage img{
  border-color:#dce5ef;
  background:#ffffff;
}

@media (max-width: 860px){
  body.page-index .performance-head{
    flex-direction:column;
    align-items:stretch;
  }

  body.page-index .performance-head .btn{
    width:100%;
  }

  body.page-index .performance-controls-row,
  body.page-index .performance-range{
    display:flex;
    align-items:stretch;
    flex-direction:column;
  }

  body.page-index .performance-mode-field,
  body.page-index .performance-range .field,
  body.page-index .performance-range-fields,
  body.page-index .performance-range-fields .field,
  body.page-index .performance-range .btn{
    flex:1 1 100%;
    min-width:0;
  }

  body.page-index .performance-mode-field{
    margin-left:0;
    width:100%;
  }

  body.page-index .performance-mode-field .limit-select{
    width:100%;
    max-width:none;
  }

  body.page-index .performance-title-row{
    align-items:flex-start;
    flex-wrap:wrap;
  }

  .lightbox-compare-head{
    grid-template-columns:1fr;
    align-items:stretch;
  }

  .compare-controls{
    justify-self:stretch;
  }

  .compare-controls select{
    flex:1;
  }

  .compare-stage{
    grid-template-columns:1fr;
  }

  .compare-stage img{
    max-height:260px;
  }
}

:root[data-theme="light"]{
  color-scheme: light;

  --bg0:#f7fafc;
  --bg1:#eef4f8;

  --card:rgba(255,255,255,.86);
  --card2:rgba(245,251,255,.9);

  --text:#10202c;
  --muted:rgba(16,32,44,.62);
  --line:rgba(20,54,72,.16);

  --shadow: 0 18px 42px rgba(4,26,40,.09);

  --modal-bg: rgba(255,255,255,.98);
  --field-bg: rgba(245,251,255,.88);
  --field-border: rgba(26,62,84,.24);
  --focus: rgba(45,212,191,.62);
  --backdrop: rgba(2,24,38,.22);
}

@media (prefers-color-scheme: light){
  :root:not([data-theme]){
    color-scheme: light;

    --bg0:#f7fafc;
    --bg1:#eef4f8;

    --card:rgba(255,255,255,.86);
    --card2:rgba(245,251,255,.9);

    --text:#10202c;
    --muted:rgba(16,32,44,.62);
    --line:rgba(20,54,72,.16);

    --shadow: 0 18px 42px rgba(4,26,40,.09);

    --modal-bg: rgba(255,255,255,.98);
    --field-bg: rgba(245,251,255,.88);
    --field-border: rgba(26,62,84,.24);
    --focus: rgba(45,212,191,.62);
    --backdrop: rgba(2,24,38,.22);
  }
}

/* =========================
   Base
========================= */
*{ box-sizing:border-box; }
html{ height:100%; }

body{
  min-height:100%;
  margin:0;
  font-family:var(--sans);
  color:var(--text);
  background:
    radial-gradient(880px 560px at 8% -8%, rgba(45,212,191,.20), transparent 56%),
    radial-gradient(980px 620px at 92% -12%, rgba(251,146,60,.18), transparent 56%),
    radial-gradient(780px 520px at 48% 18%, rgba(253,224,71,.08), transparent 62%),
    linear-gradient(180deg, var(--bg0), var(--bg1));
}

.wrap{ max-width:1100px; margin:0 auto; padding:22px 18px 38px; }

a{ color:inherit; }

.app-footer{
  margin-top:18px;
  display:flex;
  align-items:center;
  justify-content:flex-end;
  gap:10px;
  flex-wrap:wrap;
  padding:12px;
  border:1px solid var(--line);
  border-radius:14px;
  background:rgba(255,255,255,.04);
}

.app-footer .btn.icon-only{
  width:42px;
  min-width:42px;
  height:42px;
  padding:0;
  justify-content:center;
  flex:0 0 auto;
}

.app-footer .btn.icon-only svg{
  width:18px;
  height:18px;
}

.sync-state{
  margin-right:auto;
  font-size:12px;
  letter-spacing:.01em;
  color:var(--muted);
}

.sync-state.ok{
  color:var(--good);
}

.sync-state.warn{
  color:var(--warn);
}

.sync-state.bad{
  color:var(--bad);
}

.app-footer-page{
  justify-content:space-between;
}

.summary-bar{
  margin-bottom:12px;
  padding:14px;
  border-style:dashed;
}

.summary-controls{
  display:flex;
  align-items:flex-end;
  gap:10px;
  flex-wrap:wrap;
}

.summary-controls .field{
  width:170px;
}

.summary-caption{
  margin-top:10px;
  color:var(--muted);
  font-size:12px;
  letter-spacing:.18px;
}

.trend-line{
  margin-top:12px;
  padding:14px;
  border-left:4px solid rgba(45,212,191,.42);
}

.trend-title{
  font-size:12px;
  letter-spacing:.25px;
  font-weight:900;
  color:var(--muted);
}

.trend-text{
  margin-top:6px;
  font-size:14px;
  font-weight:700;
}

.trend-delta{
  margin-top:6px;
  color:var(--muted);
  font-size:12px;
}

.trend-text.good{ color: var(--good); }
.trend-text.warn{ color: var(--warn); }
.trend-text.muted{ color: var(--muted); }

/* =========================
   Topbar
========================= */
.topbar{
  position:sticky; top:0; z-index:60;
  backdrop-filter: blur(14px);
  background: linear-gradient(180deg, rgba(5,20,30,.62), rgba(5,20,30,.36));
  border-bottom:1px solid var(--line);
}
:root[data-theme="light"] .topbar{
  background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(247,251,255,.82));
}
@media (prefers-color-scheme: light){
  :root:not([data-theme]) .topbar{
    background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(247,251,255,.82));
  }
}
.topbar .wrap{ padding:14px 18px; }

.head{
  display:flex; align-items:center; justify-content:space-between;
  gap:14px; flex-wrap:wrap;
}

.title{ display:flex; gap:12px; align-items:center; }

.badge{
  width:34px; height:34px; border-radius:12px;
  background: linear-gradient(135deg, rgba(45,212,191,.92), rgba(59,130,246,.86), rgba(251,146,60,.82));
  box-shadow: 0 14px 30px rgba(5,24,38,.24);
}

h1{ margin:0; font-size:18px; letter-spacing:.2px; }
.sub{ margin:0; color:var(--muted); font-size:12.5px; }

.actions{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }

/* =========================
   Buttons / chips
========================= */
.btn{
  border:1px solid var(--line);
  background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.05));
  color:var(--text);
  padding:10px 12px;
  border-radius:12px;
  cursor:pointer;
  box-shadow: 0 10px 18px rgba(4,20,32,.14);
  font-weight:800;
  font-size:13px;
  display:inline-flex;
  align-items:center;
  gap:8px;
  user-select:none;
  text-decoration:none;
  transition: transform .12s ease, filter .12s ease, box-shadow .12s ease;
}
.btn:hover{ transform: translateY(-1px); filter: brightness(1.06); }
.btn:active{ transform: translateY(0); filter: brightness(1.00); }

.btn svg{ width:18px; height:18px; }

.btn.primary{
  border-color: transparent;
  background: linear-gradient(135deg, var(--brand), var(--brand2));
  color:#082028;
  box-shadow: 0 14px 24px rgba(12,42,58,.26);
}
.btn.primary:hover{ filter: brightness(1.05); }

.btn.ghost{
  background: linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,.04));
}

.btn.danger{
  border-color:rgba(248,113,113,.42);
  background:linear-gradient(180deg, rgba(127,29,29,.52), rgba(90,22,22,.34));
  color:#fecaca;
}

.btn.danger:hover{
  border-color:rgba(252,165,165,.6);
  background:linear-gradient(180deg, rgba(153,27,27,.56), rgba(102,25,25,.38));
}

.chip{
  border:1px solid var(--line);
  border-radius:999px;
  padding:8px 10px;
  background: rgba(255,255,255,.06);
  font-weight:900;
  font-size:12px;
}

.menu-toggle{
  display:none;
  border:1px solid rgba(255,255,255,.18);
  background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
  color:var(--text);
  border-radius:10px;
  height:38px;
  padding:0 10px;
  font-size:12px;
  font-weight:800;
  align-items:center;
  gap:8px;
  cursor:pointer;
}

.menu-toggle svg{
  width:16px;
  height:16px;
}

.menu-toggle .menu-toggle-close{
  display:none;
}

.menu-toggle.is-open .menu-toggle-open{
  display:none;
}

.menu-toggle.is-open .menu-toggle-close{
  display:block;
}

.fab-dock{
  display:none;
}

.fab-main{
  border:none;
  width:52px;
  height:52px;
  border-radius:999px;
  padding:0;
  display:grid;
  place-items:center;
  color:#063029;
  background:linear-gradient(135deg, #0df2cc 0%, #f59e0b 100%);
  cursor:pointer;
  box-shadow:0 14px 28px rgba(0,0,0,.34);
}

.fab-main svg{
  width:21px;
  height:21px;
}

.fab-main .fab-main-close{
  display:none;
}

.fab-main.is-open .fab-main-open{
  display:none;
}

.fab-main.is-open .fab-main-close{
  display:block;
}

.fab-menu{
  display:flex;
  flex-direction:column;
  align-items:flex-end;
  gap:8px;
  margin-bottom:8px;
}

.fab-menu[hidden]{
  display:none !important;
}

.fab-menu .fab-btn{
  border:1px solid rgba(255,255,255,.16);
  border-radius:999px;
  height:42px;
  padding:0 14px;
  font-size:12px;
  font-weight:900;
  display:inline-flex;
  align-items:center;
  gap:8px;
  color:var(--text);
  cursor:pointer;
  box-shadow:0 10px 24px rgba(0,0,0,.30);
}

.fab-menu .fab-btn svg{
  width:15px;
  height:15px;
}

.fab-menu .fab-btn.fab-diet{
  border-color:transparent;
  color:#062620;
  background:linear-gradient(135deg, #0df2cc 0%, #f59e0b 100%);
}

.fab-menu .fab-btn.fab-workout{
  background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
}

.mono{ font-family: var(--mono); }

/* =========================
   Grid / cards
========================= */
.grid{
  display:grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap:12px;
}

@media (max-width: 920px){
  .grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
}

@media (max-width: 520px){
  .grid{ grid-template-columns: 1fr; }
}

.card{
  background: linear-gradient(180deg, var(--card), var(--card2));
  border:1px solid var(--line);
  border-radius: var(--r);
  box-shadow: var(--shadow);
  overflow:hidden;
}

.kpis{
  display:grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap:12px;
}

@media (max-width: 980px){
  .kpis{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
}

@media (max-width: 560px){
  .kpis{ grid-template-columns: 1fr; }
}

.kpi{
  padding:14px 14px;
  display:flex;
  flex-direction:column;
  gap:8px;
}

.kpi-top{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}

.kpi-title{
  font-size:11px;
  letter-spacing:.35px;
  font-weight:950;
  color:var(--muted);
}

.kpi-val{
  font-size:30px;
  font-weight:1000;
  letter-spacing:.2px;
  line-height:1;
}

.kpi-sub{
  color:var(--muted);
  font-size:12px;
}

.label{
  font-size:11px;
  letter-spacing:.35px;
  font-weight:950;
  color:var(--muted);
}

.value{
  font-size:24px;
  font-weight:1000;
  margin-top:4px;
}

.hint{
  margin-top:2px;
  color:var(--muted);
  font-size:12px;
}

.section{ margin-top:18px; }

.section-head{
  display:flex;
  align-items:flex-end;
  justify-content:space-between;
  gap:14px;
  flex-wrap:wrap;
  margin: 10px 0 10px;
}

.section-head h2{
  margin:0;
  font-size:14px;
  letter-spacing:.2px;
}

.section-actions{
  display:flex;
  align-items:center;
  gap:10px;
  flex-wrap:wrap;
}

.limit-select{
  width:auto;
  min-width:164px;
  height:42px;
  border-radius:12px;
  border:1px solid var(--line);
  background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
  color:var(--text);
  padding:0 36px 0 12px;
  font-size:13px;
  font-weight:700;
}

.tools{
  display:flex;
  align-items:center;
  gap:10px;
  flex-wrap:wrap;
}

.search{
  display:flex;
  align-items:center;
  gap:8px;
  border:1px solid var(--line);
  background: rgba(255,255,255,.06);
  border-radius:14px;
  padding:10px 12px;
  min-width: min(360px, 92vw);
}
.search svg{ width:18px; height:18px; opacity:.9; }
.search input{
  width:100%;
  border:none;
  outline:none;
  background:transparent;
  color:var(--text);
  font-size:13px;
}

/* =========================
   Tables
========================= */
.table{
  overflow:auto;
}

table{
  width:100%;
  border-collapse:separate;
  border-spacing:0;
  overflow:hidden;
  border:1px solid var(--line);
  border-radius: var(--r);
  background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
  box-shadow: var(--shadow);
}

thead th{
  text-align:left;
  font-size:11px;
  letter-spacing:.35px;
  font-weight:950;
  color:var(--muted);
  padding:12px 12px;
  border-bottom:1px solid var(--line);
  position:sticky;
  top: 0;
  z-index: 2;
  background: linear-gradient(180deg, rgba(8,22,32,.88), rgba(8,22,32,.72));
}
:root[data-theme="light"] thead th{
  background: linear-gradient(180deg, rgba(255,255,255,.98), rgba(248,253,255,.95));
}
@media (prefers-color-scheme: light){
  :root:not([data-theme]) thead th{
    background: linear-gradient(180deg, rgba(255,255,255,.98), rgba(248,253,255,.95));
  }
}

tbody td{
  padding:11px 12px;
  border-bottom:1px solid rgba(155,184,204,.20);
  font-size:13px;
  vertical-align:top;
  color:var(--text);
}

tbody tr:hover td{
  background: rgba(45,212,191,.08);
}

.data-row{
  cursor:pointer;
}

.pill{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  font-weight:950;
  font-size:12px;
  border-radius:999px;
  padding:6px 10px;
  border:1px solid var(--line);
}

.pill.good{ color: #062013; background: rgba(44,241,162,.92); border-color: rgba(44,241,162,.44); }
.pill.bad{ color: #2a0010; background: rgba(255,77,125,.92); border-color: rgba(255,77,125,.44); }
.pill.warn{ color: var(--text); background: rgba(255,255,255,.08); }
.pill.type-class{ color:#0b2c3d; background:rgba(186,230,253,.9); border-color:rgba(125,211,252,.58); }
.pill.type-strength{ color:#3b1700; background:rgba(254,215,170,.92); border-color:rgba(251,146,60,.5); }
.pill.type-mixed{ color:#113116; background:rgba(167,243,208,.92); border-color:rgba(52,211,153,.5); }

.lift-main{
  margin-top:0;
  font-weight:700;
  font-size:12.5px;
  line-height:1.35;
}

.lift-main:not(:first-child){
  margin-top:10px;
}

.lift-delta{
  margin-top:4px;
  font-size:11px;
  color:var(--muted);
}

.photo-link{
  text-decoration:none;
}

.photo-pill{
  border:1px solid rgba(44,241,162,.42);
  border-radius:999px;
  background:rgba(44,241,162,.22);
  color:var(--text);
  font-weight:900;
  font-size:12px;
  padding:7px 12px;
  cursor:pointer;
}

.photo-pill:hover{
  filter:brightness(1.1);
}

/* =========================
   Dialog / form
========================= */
dialog{
  width: min(760px, 96vw);
  border:none;
  padding:0;
  border-radius: 18px;
  overflow:hidden;
  background: var(--modal-bg);
  color: var(--text);
  box-shadow: 0 24px 70px rgba(0,0,0,.62);
}
dialog::backdrop{ background: var(--backdrop); }

.modal-head{
  padding:14px 14px;
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:14px;
  border-bottom:1px solid var(--line);
  background: rgba(255,255,255,.05);
}

.modal-head-actions{
  display:flex;
  align-items:center;
  gap:8px;
}

.modal-title{ font-weight:1000; font-size:14px; }
.modal-sub{ color: var(--muted); font-size:12.5px; margin-top:3px; }

.x{
  border:none;
  background: rgba(255,255,255,.08);
  color: var(--text);
  font-size:14px;
  width:34px;
  height:34px;
  border-radius:12px;
  cursor:pointer;
}

.modal-body{ padding:14px 14px; }
.form-grid{
  display:grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap:12px;
}
@media (max-width: 680px){
  .form-grid{ grid-template-columns: 1fr; }
  .supp-modal .modal-head{
    align-items:flex-start;
  }
  .supp-modal .modal-head-actions{
    width:100%;
    justify-content:flex-end;
  }
  .supp-modal .modal-head-actions .btn{
    padding:0 10px;
    font-size:11px;
  }
}

/* Reemplazo del style="grid-column: 1 / -1;" */
.span-all{ grid-column: 1 / -1; }

.field{
  min-width:0;
}

.supplements-body{
  display:grid;
  gap:14px;
}

.supp-modal{
  width:min(980px, 96vw);
}

.supp-modal .modal-head-actions .btn{
  height:34px;
  padding:0 12px;
  font-size:12px;
  white-space:nowrap;
}

.supplements-hub{
  padding:14px;
}

.supplements-hub-head{
  margin-bottom:4px;
}

.supp-block{
  border:1px solid var(--line);
  border-radius:14px;
  background:rgba(255,255,255,.04);
  padding:12px;
}

.supp-block-head{
  display:flex;
  align-items:flex-end;
  justify-content:space-between;
  gap:10px;
  flex-wrap:wrap;
  margin-bottom:10px;
}

.supp-block-head h3{
  margin:0;
  font-size:13px;
  letter-spacing:.2px;
}

.supp-block-sub{
  margin:3px 0 0;
  font-size:12px;
  color:var(--muted);
}

.supp-grid{
  grid-template-columns: repeat(3, minmax(0, 1fr));
}

.supp-form-actions{
  margin-top:10px;
  display:flex;
  justify-content:flex-end;
  gap:10px;
  flex-wrap:wrap;
}

.supp-form-alert{
  margin-top:8px;
  border:1px solid var(--line);
  border-radius:12px;
  background:var(--field-bg);
  color:var(--muted);
  font-size:12px;
  line-height:1.45;
  padding:10px 12px;
}

.supp-table-wrap{
  margin-top:10px;
}

.supp-actions-cell{
  display:flex;
  align-items:center;
  gap:8px;
  flex-wrap:wrap;
}

.supp-actions-cell .btn{
  height:34px;
  padding:0 10px;
  font-size:12px;
}

.supp-history-detail{
  font-size:12px;
  line-height:1.35;
  color:var(--muted);
  max-width:340px;
}

.supp-history-notes{
  font-size:12px;
  color:var(--muted);
  max-width:280px;
}

.supp-day-controls{
  display:flex;
  align-items:flex-end;
  gap:10px;
  flex-wrap:wrap;
}

.supp-day-controls .field{
  width:190px;
}

.supp-day-foot{
  margin-top:10px;
  color:var(--muted);
  font-size:12px;
}

.supp-page-actions{
  margin-top:12px;
  display:flex;
  align-items:center;
  justify-content:flex-start;
  gap:10px;
  flex-wrap:wrap;
}

.supp-modal-actions{
  margin-top:12px;
  border-top:1px solid var(--line);
  padding:12px 0 0;
  background:transparent;
}

@media (max-width: 860px){
  .supp-grid{
    grid-template-columns: 1fr;
  }

  .supp-actions-cell .btn{
    width:100%;
  }

  .supp-day-controls{
    width:100%;
  }

  .supp-day-controls .field{
    width:100%;
  }

  .supp-page-actions .btn{
    width:100%;
  }
}

.strength-block{
  margin-top:4px;
  padding:12px;
  border:1px solid var(--line);
  border-radius:14px;
  background:rgba(255,255,255,.04);
}

.strength-grid{
  display:grid;
  grid-template-columns:repeat(2, minmax(0, 1fr));
  gap:12px;
}

.strength-card{
  border:1px solid var(--line);
  border-radius:12px;
  padding:10px;
  background:rgba(255,255,255,.05);
}

.strength-card h3{
  margin:0 0 8px;
  font-size:12px;
  letter-spacing:.25px;
  font-weight:900;
  color:var(--muted);
}

.check-row{
  margin-top:12px;
  display:flex;
  align-items:center;
  gap:10px;
  font-size:13px;
  color:var(--text);
}

.check-row input[type="checkbox"]{
  width:16px;
  height:16px;
  margin:0;
}

@media (max-width: 760px){
  .strength-grid{
    grid-template-columns:1fr;
  }
}

label{
  display:block;
  font-size:12px;
  color:var(--muted);
  font-weight:900;
  letter-spacing:.15px;
  margin-bottom:6px;
}

input, select, textarea{
  width:100%;
  border-radius:14px;
  border:1px solid var(--field-border);
  background: var(--field-bg);
  color:var(--text);
  padding:10px 12px;
  outline:none;
  font-size:13px;
  line-height: 1.2;
}

input:focus, select:focus, textarea:focus{
  border-color: var(--focus);
  box-shadow: 0 0 0 4px rgba(0,229,255,.16);
}

textarea{
  min-height: 96px;
  resize: vertical;
}

::placeholder{ color: rgba(244,246,255,.46); }
:root[data-theme="light"] ::placeholder{ color: rgba(12,16,32,.45); }
@media (prefers-color-scheme: light){
  :root:not([data-theme]) ::placeholder{ color: rgba(12,16,32,.45); }
}

select{
  appearance: none;
  background-image:
    linear-gradient(45deg, transparent 50%, rgba(244,246,255,.70) 50%),
    linear-gradient(135deg, rgba(244,246,255,.70) 50%, transparent 50%);
  background-position:
    calc(100% - 18px) calc(50% - 2px),
    calc(100% - 12px) calc(50% - 2px);
  background-size: 6px 6px, 6px 6px;
  background-repeat:no-repeat;
  padding-right: 34px;
}

/* =========================
   Photo preview block
========================= */
.photo-preview{
  border:1px solid var(--line);
  border-radius: 16px;
  padding:12px;
  background: rgba(255,255,255,.05);
}
.preview-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  margin-bottom:10px;
  flex-wrap:wrap;
}
.preview-title{ font-weight:950; font-size:13px; }
.preview-sub{ color:var(--muted); font-size:12px; }
.preview-actions{ display:flex; gap:10px; }
.preview-existing[hidden]{ display:none !important; }

#photoFile{ width:100%; }

#photoPreview{
  margin-top:10px;
  width:100%;
  max-height: 360px;
  object-fit: contain;
  border-radius: 14px;
  border:1px solid var(--line);
  display:none;
}
#photoPreview.show{ display:block; }

.form-alert{
  margin:0 0 12px;
  padding:10px 12px;
  border-radius:10px;
  border:1px solid rgba(255,99,132,.35);
  background:rgba(255,99,132,.12);
  color:#ffd9df;
  font-size:13px;
  font-weight:700;
}

/* =========================
   Modal actions
========================= */
.modal-actions{
  display:flex;
  justify-content:flex-end;
  gap:10px;
  border-top:1px solid var(--line);
  padding:12px 14px;
  background: rgba(255,255,255,.04);
}

.lightbox{
  width:min(980px, 96vw);
}

.lightbox-body{
  padding:14px;
  display:flex;
  align-items:center;
  justify-content:center;
}

#lightboxImg{
  display:block;
  margin-inline:auto;
  width:100%;
  max-height:78vh;
  object-fit:contain;
  border-radius:14px;
  border:1px solid var(--line);
  background:rgba(0,0,0,.18);
}

.confirm{
  width:min(640px, 96vw);
}

.confirm-body{
  padding:14px;
}

#replaceConfirmImg{
  width:100%;
  max-height:48vh;
  object-fit:contain;
  border-radius:14px;
  border:1px solid var(--line);
  display:none;
}

#replaceConfirmImg.show{
  display:block;
}

.import-modal{
  width:min(1080px, 98vw);
}

.import-modal .modal-body{
  padding:18px 18px 20px;
  display:grid;
  gap:14px;
}

.import-links{
  margin:6px 0 4px;
  display:flex;
  flex-wrap:wrap;
  gap:10px;
}

.import-actions{
  display:flex;
  align-items:center;
  gap:10px;
  flex-wrap:wrap;
  margin-top:4px;
}

.import-summary{
  margin-top:12px;
  padding:10px 12px;
  border:1px solid var(--line);
  border-radius:12px;
  background:rgba(255,255,255,.05);
  font-size:12px;
}

.import-summary.ok{
  border-color:rgba(52,211,153,.45);
  color:var(--good);
}

.import-summary.error{
  border-color:rgba(255,77,125,.45);
  color:var(--bad);
  background:rgba(255,77,125,.08);
}

.import-table{
  margin-top:12px;
  max-height:48vh;
  overflow:auto;
}

.report-bug-modal{
  width:min(860px, 96vw);
}

.report-bug-body{
  display:grid;
  gap:12px;
}

.report-bug-body textarea{
  width:100%;
  min-height:240px;
  resize:vertical;
  border:1px solid var(--line);
  border-radius:12px;
  background:var(--field-bg);
  color:var(--text);
  font-family:var(--mono);
  font-size:12px;
  line-height:1.45;
  padding:10px 12px;
}

/* =========================
   Toast
========================= */
.toast{
  position: fixed;
  right: 14px;
  bottom: 14px;
  z-index: 99;
  width: min(360px, calc(100vw - 28px));
  border:1px solid var(--line);
  border-radius: 18px;
  background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.06));
  box-shadow: var(--shadow);
  padding: 12px 12px;
  transform: translateY(16px);
  opacity: 0;
  pointer-events:none;
  transition: transform .16s ease, opacity .16s ease;
}
.toast.show{
  opacity: 1;
  transform: translateY(0);
}
.toast.in-dialog{
  z-index: 100000;
}
.toast .t1{ font-weight:1000; font-size:13px; }
.toast .t2{ color: var(--muted); font-size:12.5px; margin-top:2px; }

/* =========================
   Help page (sin <style> embebido)
========================= */
.help-wrap{max-width:980px;margin:0 auto;padding:22px 18px 50px;}
.help-top{display:flex;align-items:flex-start;justify-content:space-between;gap:14px;flex-wrap:wrap;margin-bottom:10px;}
.help-top h1{margin:0;font-size:18px;letter-spacing:.2px}
.help-top p{margin:6px 0 0;color:var(--muted);font-size:13px;max-width:72ch}
.help-actions{display:flex;gap:10px;flex-wrap:wrap;align-items:center}

.help-search{
  display:flex;align-items:center;gap:8px;
  padding:10px 12px;border-radius:14px;border:1px solid var(--line);
  background: rgba(255,255,255,.06);
  min-width:min(420px, 92vw);
}
.help-search svg{
  width:18px;
  height:18px;
  opacity:.9;
  flex:0 0 auto;
}
.help-search input{
  width:100%;border:none;outline:none;background:transparent;
  color:var(--text);font-size:13px;
}

.toc{
  margin:14px 0 18px;
  display:flex;gap:8px;flex-wrap:wrap;
}
.toc a{
  display:inline-flex;
  text-decoration:none;
  border:1px solid var(--line);
  background: rgba(255,255,255,.06);
  color:var(--text);
  padding:8px 10px;
  border-radius:999px;
  font-size:12px;
  font-weight:800;
}
.toc a:hover{ transform: translateY(-1px); }

.panel{
  background: linear-gradient(180deg, var(--card), rgba(255,255,255,.03));
  border:1px solid var(--line);
  border-radius: var(--r);
  box-shadow: var(--shadow);
  overflow:hidden;
  margin: 12px 0;
}
.panel summary{
  cursor:pointer;
  list-style:none;
  padding:14px 14px;
  display:flex;align-items:center;justify-content:space-between;gap:12px;
  user-select:none;
}
.panel summary::-webkit-details-marker{display:none;}
.panel h2{margin:0;font-size:13px;letter-spacing:.2px;color:var(--text);font-weight:900;text-transform:none;}
.caret{font-family:var(--mono);color:var(--muted);font-size:12px;}
.panel .body{
  padding:0 14px 14px;
  color:var(--muted);
  font-size:13px;
  line-height:1.45;
}

.k{
  font-family:var(--mono);
  font-size:12px;
  padding:2px 6px;
  border-radius:8px;
  border:1px solid var(--line);
  background: rgba(255,255,255,.06);
  color: var(--text);
  white-space:nowrap;
}

.code{
  font-family:var(--mono);
  font-size:12px;
  padding:10px 10px;
  border-radius:14px;
  border:1px solid var(--line);
  background: rgba(0,0,0,.18);
  color: var(--text);
  overflow:auto;
  margin:10px 0;
}
:root[data-theme="light"] .code{ background: rgba(12,16,32,.06); }
@media (prefers-color-scheme: light){
  :root:not([data-theme]) .code{ background: rgba(12,16,32,.06); }
}

.muted{color:var(--muted)}
.ok{color:var(--good);font-weight:800}
.warn{color:var(--warn);font-weight:800}

.help-tip{ margin-top:16px; }
.help-tip .value{ font-size:16px; }

/* =========================
   Changelog page
========================= */
.changelog-wrap{
  max-width:980px;
  margin:0 auto;
  padding:22px 18px 50px;
}

.changelog-intro{
  padding:16px;
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:12px;
}

.changelog-intro h2{
  margin:0;
  font-size:20px;
}

.changelog-intro p{
  margin:8px 0 0;
  color:var(--muted);
  max-width:72ch;
}

.release{
  margin-top:14px;
  padding:16px;
}

.release-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  flex-wrap:wrap;
}

.release-head h2{
  margin:0;
  font-size:22px;
  letter-spacing:.2px;
}

.release-date{
  border:1px solid var(--line);
  border-radius:999px;
  padding:6px 10px;
  font-size:12px;
}

.release-sub{
  margin:8px 0 0;
  color:var(--muted);
}

.release-list{
  margin:12px 0 0;
  padding-left:20px;
  color:var(--text);
}

.release-list li{
  margin:7px 0;
}

/* =========================
   Stitch Visual Skin (Index + Modals)
========================= */
body{
  background:
    radial-gradient(920px 620px at 10% -10%, rgba(13,242,204,.18), transparent 58%),
    radial-gradient(720px 520px at 94% -12%, rgba(245,158,11,.16), transparent 58%),
    linear-gradient(180deg, #04110f 0%, #06201b 60%, #071713 100%);
}

.topbar{
  backdrop-filter: blur(16px);
  background: linear-gradient(180deg, rgba(16,34,31,.84), rgba(16,34,31,.62));
  border-bottom:1px solid rgba(255,255,255,.05);
}

.topbar .wrap{
  max-width:1380px;
  padding:12px 18px;
}

.wrap{
  max-width:1380px;
  padding:18px 18px 40px;
}

.title h1{
  font-size:34px;
  font-weight:800;
  letter-spacing:-.02em;
  background:linear-gradient(90deg, var(--brand), #8efce7 66%);
  -webkit-background-clip:text;
  background-clip:text;
  color:transparent;
}

.sub{
  color:rgba(172,193,188,.66);
  font-size:11px;
  letter-spacing:.04em;
}

.badge{
  width:38px;
  height:38px;
  border-radius:12px;
  box-shadow: 0 0 0 1px rgba(255,255,255,.08), 0 12px 24px rgba(13,242,204,.2);
}

.actions{
  gap:8px;
}

.btn{
  border:1px solid rgba(255,255,255,.13);
  background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  color:var(--text);
  border-radius:10px;
  padding:9px 12px;
  font-size:12px;
  font-weight:700;
  box-shadow:none;
}

.btn svg{
  width:16px;
  height:16px;
}

.btn.ghost:hover{
  background:rgba(255,255,255,.08);
  border-color:rgba(13,242,204,.34);
}

#btnWorkout.btn.primary{
  border:1px solid rgba(255,255,255,.16);
  background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
  color:#f0f8f6;
}

#btnWorkout.btn.primary svg{
  color:var(--brand);
}

#btnDiet.btn.primary{
  border:none;
  background:linear-gradient(135deg, #0df2cc 0%, #f59e0b 100%);
  color:#0d2522;
  box-shadow:0 10px 24px rgba(13,242,204,.24);
}

.chip{
  border-color:rgba(255,255,255,.14);
  background:rgba(255,255,255,.04);
  color:rgba(210,230,224,.92);
  font-size:11px;
}

.summary-bar,
.trend-line,
.kpi.card,
.table.card,
.app-footer,
.panel,
.release,
.changelog-intro{
  background:linear-gradient(180deg, rgba(16,34,31,.72), rgba(16,34,31,.5));
  border:1px solid rgba(255,255,255,.08);
  box-shadow:0 10px 34px rgba(0,0,0,.28);
}

.summary-bar{
  border-style:solid;
}

.summary-caption{
  color:rgba(158,188,179,.7);
}

.trend-line{
  border-left:4px solid rgba(13,242,204,.76);
}

.kpi{
  min-height:116px;
}

.kpi-title{
  color:rgba(158,188,179,.72);
  letter-spacing:.2em;
  text-transform:uppercase;
}

.kpi-val{
  font-size:44px;
  font-weight:800;
  letter-spacing:-.03em;
}

.kpi-sub{
  color:rgba(158,188,179,.72);
}

.section-head h2{
  font-size:31px;
  font-weight:800;
  letter-spacing:-.02em;
  position:relative;
  padding-left:18px;
}

.section-head h2::before{
  content:"";
  position:absolute;
  left:0;
  top:50%;
  transform:translateY(-50%);
  width:6px;
  height:24px;
  border-radius:999px;
  background:linear-gradient(180deg, var(--brand), rgba(13,242,204,.26));
}

.search{
  min-width:min(390px, 94vw);
  border:1px solid rgba(255,255,255,.14);
  background:rgba(255,255,255,.04);
}

.search input{
  font-size:12px;
}

/* Compact search bars in table headers */
.section-actions .search{
  width:min(330px, 72vw);
  min-width:min(280px, 72vw);
  height:46px;
  padding:0 10px;
  border-radius:12px;
  gap:7px;
}

.section-actions .search svg{
  width:16px;
  height:16px;
  flex:0 0 auto;
}

.section-actions .search input{
  height:100%;
  font-size:11.5px;
  line-height:1;
}

.section-actions .btn{
  height:46px;
  padding-top:0;
  padding-bottom:0;
}

table{
  border:1px solid rgba(255,255,255,.08);
  background:linear-gradient(180deg, rgba(16,34,31,.72), rgba(16,34,31,.52));
  border-radius:12px;
}

thead th{
  font-size:10px;
  letter-spacing:.12em;
  text-transform:uppercase;
  color:rgba(158,188,179,.78);
  background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  border-bottom:1px solid rgba(255,255,255,.08);
}

tbody td{
  border-bottom:1px solid rgba(255,255,255,.06);
  color:rgba(222,236,232,.94);
}

tbody tr:hover td{
  background:rgba(255,255,255,.05);
}

.pill{
  border-color:rgba(255,255,255,.14);
}

.pill.good{
  color:#0a2f28;
  background:rgba(13,242,204,.82);
  border-color:rgba(13,242,204,.4);
}

.pill.bad{
  color:#320f16;
}

.pill.warn{
  background:rgba(255,255,255,.07);
}

.photo-pill{
  border:1px solid rgba(13,242,204,.28);
  background:rgba(13,242,204,.14);
  color:rgba(220,246,240,.96);
}

.lift-main{
  font-size:12px;
  color:rgba(226,239,235,.9);
}

.lift-delta{
  color:rgba(139,182,170,.82);
}

dialog{
  background:rgba(16,34,31,.78);
  border:1px solid rgba(13,242,204,.18);
  border-radius:18px;
  box-shadow:0 20px 56px rgba(0,0,0,.42);
}

dialog::backdrop{
  background:rgba(0,0,0,.62);
  backdrop-filter:blur(2px);
}

#dietModal,
#workoutModal{
  width:min(760px, 96vw);
}

#dietModal .modal-head,
#workoutModal .modal-head{
  padding:24px 24px 18px;
  background:transparent;
  border-bottom:none;
}

#dietModal .modal-title,
#workoutModal .modal-title{
  font-size:clamp(28px, 3.2vw, 36px);
  font-weight:800;
  letter-spacing:-.02em;
}

#workoutModal .modal-title{
  font-size:clamp(34px, 4vw, 42px);
}

#dietModal .modal-sub,
#workoutModal .modal-sub{
  color:rgba(13,242,204,.7);
  font-size:14px;
}

#workoutModal .modal-sub{
  color:rgba(224,241,236,.58);
}

#dietModal .x,
#workoutModal .x{
  background:transparent;
  border:1px solid rgba(255,255,255,.08);
  color:rgba(255,255,255,.74);
}

#dietModal .modal-body,
#workoutModal .modal-body{
  padding:0 24px 24px;
}

#dietModal label,
#workoutModal label{
  font-size:11px;
  text-transform:uppercase;
  letter-spacing:.11em;
  color:rgba(13,242,204,.78);
  margin-bottom:8px;
}

#dietModal input,
#dietModal select,
#dietModal textarea,
#workoutModal input,
#workoutModal select,
#workoutModal textarea{
  border:1px solid rgba(13,242,204,.2);
  background:rgba(255,255,255,.04);
  border-radius:13px;
  color:#e9f2ef;
  padding:10px 13px;
}

#dietModal input:focus,
#dietModal select:focus,
#dietModal textarea:focus,
#workoutModal input:focus,
#workoutModal select:focus,
#workoutModal textarea:focus{
  border-color:rgba(13,242,204,.48);
  box-shadow:0 0 0 1px rgba(13,242,204,.3), 0 0 16px rgba(13,242,204,.17);
}

#dietModal .photo-preview{
  border:1px solid rgba(13,242,204,.2);
  background:rgba(13,242,204,.05);
}

#dietModal .preview-title{
  font-size:14px;
  font-weight:800;
  text-transform:uppercase;
  letter-spacing:.11em;
}

#dietModal #photoFile{
  border:1px dashed rgba(13,242,204,.3);
  border-radius:12px;
  padding:26px 12px;
  background:rgba(13,242,204,.04);
}

#workoutModal .work-grid{
  grid-template-columns:repeat(3, minmax(0, 1fr));
  gap:16px;
}

#workoutModal #workClassField{
  margin-top:-2px;
}

#workoutModal .strength-head{
  display:flex;
  align-items:center;
  gap:12px;
  margin-bottom:10px;
}

#workoutModal .strength-head h3{
  margin:0;
  font-size:12px;
  font-weight:800;
  letter-spacing:.18em;
  text-transform:uppercase;
  color:rgba(238,250,246,.92);
}

#workoutModal .strength-head::after{
  content:"";
  flex:1;
  height:1px;
  background:rgba(255,255,255,.12);
}

#workoutModal .strength-block{
  border-color:rgba(255,255,255,.11);
  background:rgba(255,255,255,.04);
  padding:14px;
}

#workoutModal .strength-card{
  border-color:rgba(255,255,255,.12);
  background:rgba(255,255,255,.04);
  display:grid;
  grid-template-columns:1fr auto 1fr auto 1fr;
  gap:8px;
  align-items:end;
  padding:14px;
}

#workoutModal .strength-card h3{
  margin:0 0 2px;
  grid-column:1 / -1;
  color:#ecf8f4;
  font-size:30px;
  font-weight:700;
  letter-spacing:0;
  text-transform:none;
}

#workoutModal .triplet-sep{
  align-self:center;
  color:rgba(255,255,255,.35);
  font-size:20px;
  font-weight:600;
}

#workoutModal .triplet-field label{
  margin:6px 0 0;
  font-size:10px;
  text-align:center;
  letter-spacing:.16em;
  color:rgba(224,241,236,.42);
}

#workoutModal .triplet-field input{
  text-align:center;
  padding:11px 8px;
  border-color:rgba(255,255,255,.08);
  background:rgba(0,0,0,.20);
  font-weight:700;
}

#workoutModal .work-done-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  border:1px solid rgba(255,255,255,.12);
  border-radius:13px;
  background:rgba(255,255,255,.05);
  padding:11px 12px;
}

#workoutModal .work-done-label{
  display:flex;
  align-items:center;
  gap:10px;
  color:#eaf7f3;
  font-weight:600;
}

#workoutModal .work-done-icon{
  width:22px;
  height:22px;
  border-radius:999px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  font-size:12px;
  font-weight:900;
  color:#071d18;
  background:rgba(13,242,204,.86);
}

#workoutModal .work-done-toggle{
  display:flex;
  align-items:center;
  gap:6px;
  border-radius:999px;
  background:rgba(0,0,0,.32);
  padding:4px;
}

#workoutModal .done-btn{
  border:none;
  min-width:46px;
  height:30px;
  border-radius:999px;
  font-size:11px;
  font-weight:800;
  letter-spacing:.04em;
  color:rgba(255,255,255,.64);
  background:transparent;
  cursor:pointer;
}

#workoutModal .done-btn.no.active{
  color:#fff;
  background:rgba(239,68,68,.85);
}

#workoutModal .done-btn.yes.active{
  color:#03211b;
  background:rgba(13,242,204,.92);
}

#workoutModal .done-btn.clear.active{
  color:#e2e8f0;
  background:rgba(148,163,184,.35);
}

#workoutModal .sr-only-select{
  position:absolute;
  width:1px;
  height:1px;
  margin:-1px;
  padding:0;
  border:0;
  clip:rect(0 0 0 0);
  overflow:hidden;
  opacity:0;
  pointer-events:none;
}

#workoutModal .exercise-list{
  display:grid;
  gap:10px;
}

#workoutModal .exercise-row{
  border-color:rgba(255,255,255,.12);
  background:rgba(255,255,255,.04);
  display:grid;
  grid-template-columns:minmax(180px, 1.4fr) repeat(3, minmax(86px, .62fr)) auto;
  gap:10px;
  align-items:end;
  padding:12px;
}

#workoutModal .exercise-row .field{
  margin:0;
}

#workoutModal .exercise-row .triplet-field{
  display:grid;
  gap:5px;
}

#workoutModal .exercise-row .triplet-field label{
  margin:0;
  text-transform:uppercase;
  letter-spacing:.12em;
}

#workoutModal .exercise-row .triplet-field input{
  text-align:left;
  padding:10px 9px;
  border-color:rgba(255,255,255,.08);
  background:rgba(0,0,0,.20);
  font-weight:700;
}

#workoutModal .ex-remove-btn{
  height:40px;
  align-self:end;
}

#workoutModal .exercise-help{
  margin:10px 2px 0;
  font-size:12px;
  color:rgba(172,197,191,.8);
}

#dietModal .modal-actions,
#workoutModal .modal-actions{
  margin:16px -24px -24px;
  padding:16px 24px;
  justify-content:space-between;
  border-top:1px solid rgba(255,255,255,.08);
  background:rgba(0,0,0,.16);
}

#dietModal .modal-actions .btn.danger,
#workoutModal .modal-actions .btn.danger{
  margin-right:auto;
}

#dietModal .modal-actions .btn.primary,
#workoutModal .modal-actions .btn.primary{
  min-width:160px;
  justify-content:center;
  border-radius:999px;
  font-size:14px;
}

#workoutModal .modal-actions .btn.primary{
  min-width:190px;
}

.toast{
  border-color:rgba(13,242,204,.22);
  background:linear-gradient(180deg, rgba(16,34,31,.92), rgba(16,34,31,.72));
}

@media (max-width: 980px){
  .title h1{
    font-size:26px;
  }
  .kpi-val{
    font-size:36px;
  }
  .section-head h2{
    font-size:26px;
  }
}

@media (max-width: 920px){
  .section-actions .search{
    width:min(100%, 520px);
    min-width:0;
  }
}

@media (max-width: 860px){
  #workoutModal .work-grid{
    grid-template-columns:1fr;
  }
  #workoutModal .exercise-row{
    grid-template-columns:repeat(2, minmax(0, 1fr));
  }
  #workoutModal .exercise-row .exercise-name-field{
    grid-column:1 / -1;
  }
  #workoutModal .exercise-row .ex-remove-btn{
    grid-column:1 / -1;
    width:100%;
  }
}

@media (max-width: 680px){
  #workoutModal .exercise-row{
    grid-template-columns:1fr;
  }
  #workoutModal .modal-title{
    font-size:32px;
  }
}

/* =========================
   Stitch Polish V2
   - strong light/dark separation
   - premium lightbox skin
========================= */

/* Light theme refinement */
:root[data-theme="light"] body{
  background:
    radial-gradient(840px 520px at 10% -14%, rgba(13,242,204,.20), transparent 60%),
    radial-gradient(760px 500px at 96% -10%, rgba(245,158,11,.16), transparent 58%),
    linear-gradient(180deg, #f6fafc 0%, #eef3f8 58%, #edf2f7 100%);
}

:root[data-theme="light"] .topbar{
  background:linear-gradient(180deg, rgba(255,255,255,.94), rgba(248,252,255,.88));
  border-bottom:1px solid rgba(148,163,184,.26);
}

:root[data-theme="light"] .title h1{
  background:linear-gradient(135deg, #0f766e 0%, #0891b2 46%, #d97706 100%);
  -webkit-background-clip:text;
  background-clip:text;
  color:transparent;
}

:root[data-theme="light"] .sub{
  color:#64748b;
}

:root[data-theme="light"] .btn{
  background:linear-gradient(180deg, #ffffff, #f8fafc);
  border-color:#dbe5ef;
  color:#0f172a;
  box-shadow:0 8px 20px rgba(15,23,42,.08);
}

:root[data-theme="light"] .btn.ghost:hover{
  border-color:rgba(13,242,204,.42);
  background:rgba(13,242,204,.08);
}

:root[data-theme="light"] .btn.danger{
  border-color:#fecaca;
  background:linear-gradient(180deg, #fff5f5, #ffecec);
  color:#b91c1c;
}

:root[data-theme="light"] .btn.danger:hover{
  border-color:#fca5a5;
  background:linear-gradient(180deg, #ffeaea, #ffe0e0);
}

:root[data-theme="light"] #btnWorkout.btn.primary{
  background:linear-gradient(180deg, #ffffff, #f8fafc);
  border:1px solid #dbe5ef;
  color:#0f172a;
}

:root[data-theme="light"] #btnWorkout.btn.primary svg{
  color:#0f766e;
}

:root[data-theme="light"] #btnDiet.btn.primary{
  color:#08312f;
  box-shadow:0 12px 22px rgba(14,165,233,.18);
}

:root[data-theme="light"] .chip{
  background:#f8fafc;
  border-color:#dbe5ef;
  color:#475569;
}

:root[data-theme="light"] .summary-bar,
:root[data-theme="light"] .trend-line,
:root[data-theme="light"] .kpi.card,
:root[data-theme="light"] .table.card,
:root[data-theme="light"] .app-footer,
:root[data-theme="light"] .panel,
:root[data-theme="light"] .release,
:root[data-theme="light"] .changelog-intro{
  background:linear-gradient(180deg, rgba(255,255,255,.95), rgba(248,252,255,.90));
  border:1px solid rgba(148,163,184,.26);
  box-shadow:0 10px 24px rgba(15,23,42,.06);
}

:root[data-theme="light"] .summary-caption,
:root[data-theme="light"] .kpi-title,
:root[data-theme="light"] .kpi-sub{
  color:#64748b;
}

:root[data-theme="light"] .kpi-val{
  color:#0f172a;
}

:root[data-theme="light"] .section-head h2{
  color:#0f172a;
}

:root[data-theme="light"] .section-head h2::before{
  background:linear-gradient(180deg, #0f766e, rgba(15,118,110,.22));
}

:root[data-theme="light"] .search{
  background:#ffffff;
  border-color:#dbe5ef;
}

:root[data-theme="light"] .search input{
  color:#0f172a;
}

:root[data-theme="light"] table{
  border-color:#dbe5ef;
  background:#ffffff;
  box-shadow:none;
}

:root[data-theme="light"] thead th{
  color:#64748b;
  background:linear-gradient(180deg, #f8fafc, #f1f5f9);
  border-bottom:1px solid #e2e8f0;
}

:root[data-theme="light"] tbody td{
  color:#0f172a;
  border-bottom:1px solid #edf2f7;
}

:root[data-theme="light"] tbody tr:hover td{
  background:rgba(13,242,204,.10);
}

:root[data-theme="light"] .pill.warn{
  background:#f1f5f9;
  color:#334155;
}

:root[data-theme="light"] .photo-pill{
  color:#0f172a;
  border-color:rgba(13,242,204,.36);
  background:rgba(13,242,204,.18);
}

:root[data-theme="light"] dialog{
  background:rgba(255,255,255,.96);
  border:1px solid rgba(15,118,110,.22);
  box-shadow:0 26px 64px rgba(15,23,42,.20);
}

:root[data-theme="light"] dialog::backdrop{
  background:rgba(15,23,42,.36);
  backdrop-filter:blur(5px);
}

:root[data-theme="light"] #dietModal .modal-sub{
  color:rgba(15,118,110,.72);
}

:root[data-theme="light"] #workoutModal .modal-sub{
  color:#64748b;
}

:root[data-theme="light"] #dietModal .x,
:root[data-theme="light"] #workoutModal .x{
  border-color:#dbe5ef;
  color:#64748b;
}

:root[data-theme="light"] #dietModal label,
:root[data-theme="light"] #workoutModal label{
  color:rgba(15,118,110,.86);
}

:root[data-theme="light"] #dietModal input,
:root[data-theme="light"] #dietModal select,
:root[data-theme="light"] #dietModal textarea,
:root[data-theme="light"] #workoutModal input,
:root[data-theme="light"] #workoutModal select,
:root[data-theme="light"] #workoutModal textarea{
  color:#0f172a;
  background:rgba(248,250,252,.98);
  border-color:#dbe5ef;
}

:root[data-theme="light"] #dietModal input:focus,
:root[data-theme="light"] #dietModal select:focus,
:root[data-theme="light"] #dietModal textarea:focus,
:root[data-theme="light"] #workoutModal input:focus,
:root[data-theme="light"] #workoutModal select:focus,
:root[data-theme="light"] #workoutModal textarea:focus{
  border-color:rgba(15,118,110,.55);
  box-shadow:0 0 0 1px rgba(15,118,110,.25), 0 0 12px rgba(13,242,204,.16);
}

:root[data-theme="light"] #workoutModal .triplet-field input{
  background:#ffffff;
  border-color:#dbe5ef;
}

:root[data-theme="light"] #workoutModal .triplet-field label{
  color:#64748b;
}

:root[data-theme="light"] #workoutModal .triplet-sep{
  color:#94a3b8;
}

:root[data-theme="light"] #workoutModal .work-done-row{
  background:#ffffff;
  border-color:#dbe5ef;
}

:root[data-theme="light"] #workoutModal .work-done-label{
  color:#0f172a;
}

:root[data-theme="light"] #workoutModal .work-done-toggle{
  background:#e2e8f0;
}

:root[data-theme="light"] #workoutModal .done-btn{
  color:#475569;
}

:root[data-theme="light"] #workoutModal .done-btn.clear.active{
  color:#0f172a;
  background:#cbd5e1;
}

:root[data-theme="light"] #dietModal .modal-actions,
:root[data-theme="light"] #workoutModal .modal-actions{
  background:rgba(248,250,252,.95);
  border-top:1px solid #e2e8f0;
}

:root[data-theme="light"] .form-alert{
  border-color:rgba(190,24,93,.24);
  background:rgba(244,114,182,.10);
  color:#9d174d;
}

:root[data-theme="light"] .toast{
  border-color:rgba(15,118,110,.22);
  background:linear-gradient(180deg, rgba(255,255,255,.96), rgba(248,252,255,.92));
}

/* Lightbox */
.lightbox{
  width:min(1320px, calc(100vw - 24px));
  max-width:none;
  border:none;
  padding:0;
  background:transparent;
  box-shadow:none;
  overflow:visible;
}

.lightbox::backdrop{
  background:rgba(3,18,19,.88);
  backdrop-filter:blur(14px);
}

.lightbox-shell{
  min-height:min(92vh, 860px);
  max-height:calc(100vh - 16px);
  padding:16px;
  display:flex;
  flex-direction:column;
  gap:14px;
  box-sizing:border-box;
  overflow-y:auto;
  overflow-x:hidden;
}

.lightbox-topbar{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:10px;
}

.lightbox-meta{
  flex:1 1 auto;
  min-width:0;
  display:flex;
  flex-direction:column;
  gap:3px;
  padding:10px 14px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(16,34,31,.64);
  box-shadow:0 8px 22px rgba(0,0,0,.25);
}

.lightbox-kicker{
  font-size:10px;
  font-weight:900;
  letter-spacing:.12em;
  text-transform:uppercase;
  color:rgba(13,242,204,.82);
}

.lightbox-mainline{
  display:flex;
  align-items:center;
  flex-wrap:wrap;
  gap:7px;
  font-size:19px;
  font-weight:800;
  color:#f2fbf8;
}

.lightbox-detail{
  color:rgba(214,236,230,.78);
  font-size:11px;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.lightbox-sep{
  color:rgba(255,255,255,.35);
}

#lightboxMetaTag{
  font-size:12px;
  font-weight:900;
  letter-spacing:.06em;
  text-transform:uppercase;
  color:#0df2cc;
  border:1px solid rgba(13,242,204,.32);
  background:rgba(13,242,204,.14);
  border-radius:999px;
  padding:2px 8px;
}

.lightbox-tools{
  flex:0 0 auto;
  display:flex;
  align-items:center;
  flex-wrap:wrap;
  justify-content:flex-end;
  gap:10px;
}

.lightbox-download{
  text-decoration:none;
  border:1px solid rgba(13,242,204,.34);
  border-radius:999px;
  padding:10px 16px;
  background:rgba(13,242,204,.15);
  color:#d8fff8;
  font-size:13px;
  font-weight:800;
  letter-spacing:.01em;
}

.lightbox-download:hover{
  filter:brightness(1.08);
}

.lightbox-x{
  width:38px;
  height:38px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.16);
  background:rgba(255,255,255,.08);
}

.lightbox-stage{
  flex:0 0 auto;
  min-height:0;
  display:grid;
  grid-template-columns:48px minmax(0, 1fr) 48px;
  align-items:center;
  gap:14px;
  width:min(1120px, 100%);
  margin-inline:auto;
}

.lightbox-nav{
  width:44px;
  height:44px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.16);
  background:rgba(255,255,255,.06);
  color:rgba(255,255,255,.72);
  font-size:32px;
  line-height:1;
}

.lightbox-nav[disabled]{
  opacity:.45;
  cursor:not-allowed;
}

.lightbox-frame{
  display:grid;
  place-items:center;
  height:100%;
  min-height:340px;
  border-radius:22px;
  border:1px solid rgba(13,242,204,.20);
  background:linear-gradient(180deg, rgba(16,34,31,.64), rgba(16,34,31,.44));
  box-shadow:0 20px 48px rgba(0,0,0,.36);
  padding:18px;
  overflow:hidden;
}

#lightboxImg{
  width:auto;
  max-width:100%;
  max-height:68vh;
  object-fit:contain;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(0,0,0,.28);
}

.lightbox-shell.compare-open #lightboxImg{
  max-height:42vh;
}

.lightbox-strip{
  display:flex;
  justify-content:center;
  padding-bottom:2px;
}

.lightbox-thumb{
  width:84px;
  height:84px;
  padding:0;
  border-radius:16px;
  overflow:hidden;
  border:2px solid rgba(255,255,255,.28);
  background:rgba(255,255,255,.08);
  box-shadow:0 10px 20px rgba(0,0,0,.25);
}

.lightbox-thumb.active{
  border-color:#0df2cc;
  box-shadow:0 0 0 1px rgba(13,242,204,.48), 0 12px 26px rgba(13,242,204,.16);
}

#lightboxThumb{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
}

/* Lightbox in light mode */
:root[data-theme="light"] .lightbox::backdrop{
  background:rgba(15,23,42,.50);
}

:root[data-theme="light"] .lightbox-meta{
  background:rgba(255,255,255,.92);
  border-color:#dbe5ef;
}

:root[data-theme="light"] .lightbox-kicker{
  color:#0f766e;
}

:root[data-theme="light"] .lightbox-mainline{
  color:#0f172a;
}

:root[data-theme="light"] .lightbox-sep{
  color:#94a3b8;
}

:root[data-theme="light"] .lightbox-detail{
  color:#64748b;
}

:root[data-theme="light"] .lightbox-download{
  color:#0f766e;
  background:rgba(13,242,204,.12);
  border-color:rgba(15,118,110,.26);
}

:root[data-theme="light"] .lightbox-x{
  border-color:#dbe5ef;
  background:#ffffff;
  color:#475569;
}

:root[data-theme="light"] .lightbox-nav{
  border-color:#dbe5ef;
  background:rgba(255,255,255,.86);
  color:#475569;
}

:root[data-theme="light"] .lightbox-frame{
  background:linear-gradient(180deg, rgba(255,255,255,.92), rgba(248,250,252,.88));
  border-color:#dbe5ef;
  box-shadow:0 16px 34px rgba(15,23,42,.18);
}

:root[data-theme="light"] #lightboxImg{
  border-color:#dbe5ef;
  background:#f8fafc;
}

:root[data-theme="light"] .lightbox-thumb{
  border-color:#dbe5ef;
  background:#ffffff;
}

@media (max-width: 900px){
  .lightbox-shell{
    padding:12px;
    min-height:92vh;
    max-height:100vh;
  }
  .lightbox-mainline{
    font-size:16px;
  }
  .lightbox-stage{
    grid-template-columns:1fr;
  }
  .lightbox-nav{
    display:none;
  }
  .lightbox-frame{
    min-height:280px;
  }
  .lightbox-thumb{
    width:72px;
    height:72px;
  }
}

@media (max-width: 560px){
  .lightbox-topbar{
    flex-direction:column;
    align-items:stretch;
  }
  .lightbox-tools{
    justify-content:flex-end;
  }
}

/* =========================
   Stitch Makeover V4 (Full App)
========================= */

/* ---------- Index (dark default) ---------- */
body.page-index{
  background:
    radial-gradient(1200px 620px at -14% -22%, rgba(13,242,204,.22), transparent 62%),
    radial-gradient(980px 560px at 114% -20%, rgba(16,185,129,.20), transparent 60%),
    repeating-linear-gradient(
      180deg,
      rgba(255,255,255,.00) 0,
      rgba(255,255,255,.00) 62px,
      rgba(255,255,255,.018) 63px
    ),
    linear-gradient(180deg, #071a17 0%, #041411 54%, #05110f 100%);
}

body.page-index .topbar{
  background:linear-gradient(180deg, rgba(8,26,23,.92), rgba(8,26,23,.74));
  border-bottom:1px solid rgba(15,240,205,.12);
}

body.page-index .topbar .wrap{
  max-width:1400px;
  padding:12px 18px;
}

body.page-index .wrap{
  max-width:1400px;
  padding:16px 18px 46px;
}

body.page-index .head{
  gap:14px;
  align-items:stretch;
  flex-direction:column;
}

body.page-index .title h1{
  font-size:36px;
  line-height:1;
  letter-spacing:-.03em;
  background:linear-gradient(90deg, #0df2cc 0%, #7ef8e8 58%, #0df2cc 100%);
  -webkit-background-clip:text;
  background-clip:text;
  color:transparent;
}

body.page-index .sub{
  text-transform:uppercase;
  letter-spacing:.1em;
  font-size:11px;
  color:rgba(192,225,217,.56);
}

body.page-index .badge{
  width:34px;
  height:34px;
  border-radius:0;
  background:none;
  box-shadow:none;
  color:#0df2cc;
  display:grid;
  place-items:center;
}

body.page-index .badge svg{
  width:100%;
  height:100%;
}

body.page-index .actions{
  width:100%;
  justify-content:space-between;
  gap:8px;
}

body.page-index .actions .btn,
body.page-index .actions .chip{
  height:42px;
  border-radius:12px;
}

body.page-index .actions .btn{
  flex:1 1 150px;
  justify-content:center;
  font-size:13px;
  border-color:rgba(255,255,255,.14);
  background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
}

body.page-index .actions .btn.primary{
  color:#08342f;
}

body.page-index .actions .chip{
  display:inline-flex;
  align-items:center;
  padding-inline:12px;
  background:rgba(13,242,204,.10);
  border-color:rgba(13,242,204,.22);
  color:rgba(201,255,247,.84);
}

body.page-index .summary-bar{
  margin-top:4px;
  border:1px solid rgba(13,242,204,.14);
  background:linear-gradient(180deg, rgba(9,30,26,.72), rgba(7,24,21,.56));
  border-radius:14px;
}

body.page-index .summary-controls{
  width:100%;
  display:grid;
  grid-template-columns:1fr;
  align-items:end;
  gap:8px;
}

body.page-index .summary-range-fields{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:8px;
}

body.page-index .summary-range-fields[hidden]{
  display:none;
}

body.page-index .summary-controls .field{
  width:auto;
  min-width:0;
}

body.page-index .summary-controls .field label{
  font-size:10px;
  margin-bottom:5px;
  color:rgba(194,232,224,.58);
}

body.page-index .summary-controls input,
body.page-index .summary-controls select{
  width:100%;
  height:38px;
  border-radius:10px;
  border-color:rgba(255,255,255,.14);
  background:rgba(2,12,10,.40);
}

body.page-index .summary-controls .btn{
  width:100%;
  height:38px;
  padding-inline:12px;
  border-radius:10px;
  font-size:12px;
}

body.page-index .summary-caption{
  letter-spacing:.02em;
  font-size:12px;
  text-transform:none;
}

body.page-index .kpis{
  gap:10px;
}

body.page-index .kpi.card{
  border-radius:16px;
  border:1px solid rgba(13,242,204,.14);
  background:linear-gradient(180deg, rgba(8,30,26,.72), rgba(5,20,17,.52));
}

body.page-index .kpi{
  min-height:162px;
  padding:16px 16px 14px;
}

body.page-index .kpi-title{
  font-size:12px;
  letter-spacing:.12em;
  color:rgba(183,224,215,.72);
}

body.page-index .kpi-period{
  margin-top:4px;
  font-size:11px;
  line-height:1.2;
  color:rgba(173,205,197,.78);
}

body.page-index .kpi-period-line{
  display:block;
}

body.page-index .kpi-val{
  font-size:56px;
  letter-spacing:-.04em;
  color:#e8f6f2;
}

body.page-index .kpi-sub{
  font-size:12px;
  color:rgba(173,205,197,.68);
}

body.page-index .kpi-delta{
  margin-top:8px;
  font-size:12px;
  line-height:1.35;
}

body.page-index .kpi-delta-main{
  display:block;
  font-weight:800;
}

body.page-index .kpi-delta-meta{
  display:block;
  margin-top:10px;
  opacity:.92;
}

body.page-index .kpi-delta-meta-section{
  display:block;
  margin-top:8px;
}

body.page-index .kpi-delta-meta-section:first-child{
  margin-top:0;
}

body.page-index .kpi-delta-meta-title{
  display:block;
  font-weight:700;
  margin-bottom:3px;
}

body.page-index .kpi-delta-meta-line{
  display:block;
  margin-top:2px;
}

body.page-index .kpi-delta.good,
body.page-index .kpi-delta.state-better{
  color:#58e6cf;
}

body.page-index .kpi-delta.warn,
body.page-index .kpi-delta.state-equal{
  color:#f6c37a;
}

body.page-index .kpi-delta.bad,
body.page-index .kpi-delta.state-worse{
  color:#fb7185;
}

body.page-index .kpi-delta.muted,
body.page-index .kpi-delta.state-muted{
  color:rgba(173,205,197,.66);
}

body.page-index .trend-line{
  margin-top:10px;
  padding:16px 18px;
  border:1px solid rgba(13,242,204,.18);
  border-radius:14px;
  background:
    radial-gradient(130% 140% at 100% 0%, rgba(13,242,204,.12), transparent 55%),
    linear-gradient(180deg, rgba(8,30,26,.72), rgba(6,20,18,.58));
  box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
}

body.page-index .trend-title{
  font-size:12px;
  letter-spacing:.02em;
  font-weight:700;
  text-transform:none;
  color:rgba(220,248,241,.85);
}

body.page-index .trend-title-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
}

body.page-index .trend-text{
  margin-top:6px;
  font-size:19px;
  line-height:1.15;
  font-weight:700;
  letter-spacing:-.02em;
  color:#7af3df;
}

body.page-index .trend-text.good{
  color:#52e6cc;
}

body.page-index .trend-text.warn{
  color:#f6c37a;
}

body.page-index .trend-text.muted{
  color:#c8ddd8;
}

body.page-index .trend-delta{
  margin-top:10px;
  padding:9px 11px;
  border-radius:9px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(1,10,9,.34);
  font-size:13px;
  line-height:1.45;
  color:rgba(216,235,229,.88);
  width:100%;
}

body.page-index .section{
  margin-top:18px;
}

body.page-index .section-head{
  margin-bottom:8px;
  gap:10px;
}

body.page-index .section-title-row{
  display:flex;
  align-items:center;
  gap:12px;
  flex-wrap:wrap;
  min-width:0;
}

body.page-index .section-head h2{
  font-size:34px;
  line-height:1;
  letter-spacing:-.03em;
  color:#ecf8f4;
  text-shadow:0 12px 24px rgba(0,0,0,.18);
  padding-left:14px;
  display:inline-flex;
  align-items:center;
  gap:10px;
}

body.page-index .section-head h2::before{
  width:7px;
  height:34px;
}

body.page-index .section-count{
  margin:8px 0 0 14px;
  font-size:12px;
  letter-spacing:.01em;
  color:rgba(170,211,202,.76);
}

body.page-index .section-title-row .section-count{
  margin:0;
  align-self:center;
}

body.page-index .section-actions{
  gap:10px;
}

body.page-index .supplements-actions{
  width:100%;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}

body.page-index .supplements-actions-left,
body.page-index .supplements-actions-right{
  display:flex;
  align-items:center;
  gap:10px;
}

body.page-index .supplements-actions-left{
  flex-wrap:wrap;
}

body.page-index .supplements-actions-right{
  margin-left:auto;
  min-width:0;
}

body.page-index .supplements-actions-right .search{
  width:min(410px, 54vw);
  min-width:280px;
}

body.page-index .supplements-actions .section-quick{
  width:auto;
}

body.page-index .section-actions .search{
  width:min(410px, 78vw);
  min-width:min(300px, 78vw);
  height:44px;
  border-radius:14px;
  border-color:rgba(255,255,255,.16);
  background:rgba(255,255,255,.035);
  backdrop-filter:blur(4px);
}

body.page-index .section-actions .search input{
  font-size:13px;
  color:#d8eeea;
}

body.page-index .section-actions .btn{
  height:44px;
  border-radius:14px;
  font-size:12px;
}

body.page-index .section-actions .section-quick{
  height:40px;
  padding-inline:12px;
  white-space:nowrap;
}

body.page-index .table.card{
  border:none;
  background:transparent;
  box-shadow:none;
}

body.page-index table{
  border-radius:16px;
  border:1px solid rgba(13,242,204,.16);
  background:linear-gradient(180deg, rgba(7,28,24,.82), rgba(5,18,16,.72));
  box-shadow:0 10px 30px rgba(0,0,0,.24);
}

body.page-index thead th{
  height:48px;
  font-size:11px;
  letter-spacing:.11em;
  color:rgba(170,211,202,.78);
  background:linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.01));
  border-bottom:1px solid rgba(255,255,255,.12);
}

body.page-index tbody td{
  height:56px;
  font-size:14px;
  border-bottom:1px solid rgba(255,255,255,.05);
}

body.page-index tbody tr:hover td{
  background:rgba(13,242,204,.08);
}

body.page-index .pill.good{
  color:#013026;
  background:#20e3c6;
  border-color:#20e3c6;
}

body.page-index .pill.bad{
  color:#3a0d17;
  background:#fb7185;
  border-color:#fb7185;
}

body.page-index .app-footer{
  background:linear-gradient(180deg, rgba(8,30,26,.62), rgba(5,20,17,.52));
  border:1px solid rgba(13,242,204,.14);
  border-radius:14px;
}

body.page-index .toast{
  border-radius:14px;
  border:1px solid rgba(13,242,204,.26);
  background:linear-gradient(180deg, rgba(6,28,24,.90), rgba(5,20,18,.80));
}

/* Keep table text at usable size despite global upscale in KPI section */
body.page-index #dietTable td,
body.page-index #workTable td{
  font-size:14px;
}

body.page-index #dietTable td .mono,
body.page-index #workTable td .mono{
  font-size:13px;
}

body.page-index #dietTable .pill,
body.page-index #workTable .pill,
body.page-index #dietTable .photo-pill{
  font-size:12px;
}

body.page-index #dietTable .lift-main,
body.page-index #workTable .lift-main{
  font-size:12.5px;
}

body.page-index #dietTable .lift-delta,
body.page-index #workTable .lift-delta{
  font-size:10.5px;
}

/* ---------- Light mode: index ---------- */
:root[data-theme="light"] body.page-index{
  background:
    radial-gradient(1000px 560px at -16% -28%, rgba(13,242,204,.19), transparent 62%),
    radial-gradient(900px 500px at 118% -25%, rgba(251,191,36,.20), transparent 58%),
    repeating-linear-gradient(
      180deg,
      rgba(255,255,255,.00) 0,
      rgba(255,255,255,.00) 70px,
      rgba(15,23,42,.028) 71px
    ),
    linear-gradient(180deg, #f4f6f8 0%, #eef1f5 65%, #ebeff3 100%);
}

:root[data-theme="light"] body.page-index .topbar{
  background:linear-gradient(180deg, rgba(255,255,255,.92), rgba(248,251,255,.90));
  border-bottom:1px solid rgba(148,163,184,.30);
}

:root[data-theme="light"] body.page-index .title h1{
  background:linear-gradient(90deg, #0f766e 0%, #0ea5e9 45%, #f59e0b 100%);
  -webkit-background-clip:text;
  background-clip:text;
  color:transparent;
}

:root[data-theme="light"] body.page-index .sub{
  color:#64748b;
}

:root[data-theme="light"] body.page-index .actions .btn{
  background:linear-gradient(180deg, #ffffff, #f8fafc);
  border-color:#dce5ef;
  color:#1e293b;
  box-shadow:0 4px 14px rgba(15,23,42,.06);
}

:root[data-theme="light"] body.page-index .menu-toggle{
  background:linear-gradient(180deg, #ffffff, #f8fafc);
  border-color:#dce5ef;
  color:#1e293b;
  box-shadow:0 4px 14px rgba(15,23,42,.06);
}

:root[data-theme="light"] .fab-main{
  color:#08312f;
  box-shadow:0 10px 20px rgba(14,165,233,.18);
}

:root[data-theme="light"] .fab-menu .fab-btn.fab-workout{
  background:linear-gradient(180deg, #ffffff, #f8fafc);
  border-color:#dce5ef;
  color:#1e293b;
  box-shadow:0 6px 14px rgba(15,23,42,.10);
}

:root[data-theme="light"] .fab-menu .fab-btn.fab-diet{
  color:#08312f;
  box-shadow:0 8px 16px rgba(14,165,233,.20);
}

:root[data-theme="light"] body.page-index .actions .chip{
  background:#f0fdfa;
  border-color:#a7f3d0;
  color:#0f766e;
}

:root[data-theme="light"] body.page-index .summary-bar,
:root[data-theme="light"] body.page-index .kpi.card,
:root[data-theme="light"] body.page-index .trend-line,
:root[data-theme="light"] body.page-index .app-footer{
  background:linear-gradient(180deg, rgba(255,255,255,.94), rgba(247,250,253,.90));
  border-color:rgba(148,163,184,.26);
}

:root[data-theme="light"] body.page-index .summary-controls .field label{
  color:#64748b;
}

:root[data-theme="light"] body.page-index .summary-controls input,
:root[data-theme="light"] body.page-index .summary-controls select{
  background:#ffffff;
  border-color:#dce5ef;
  color:#0f172a;
}

:root[data-theme="light"] body.page-index .summary-controls input::-webkit-calendar-picker-indicator{
  filter:none;
  opacity:.86;
}

:root[data-theme="light"] body.page-index .kpi-title,
:root[data-theme="light"] body.page-index .kpi-sub{
  color:#64748b;
}

:root[data-theme="light"] body.page-index .kpi-period{
  color:#64748b;
}

:root[data-theme="light"] body.page-index .kpi-delta.good,
:root[data-theme="light"] body.page-index .kpi-delta.state-better{
  color:#0f766e;
}

:root[data-theme="light"] body.page-index .kpi-delta.warn,
:root[data-theme="light"] body.page-index .kpi-delta.state-equal{
  color:#b45309;
}

:root[data-theme="light"] body.page-index .kpi-delta.bad,
:root[data-theme="light"] body.page-index .kpi-delta.state-worse{
  color:#b91c1c;
}

:root[data-theme="light"] body.page-index .kpi-delta.muted,
:root[data-theme="light"] body.page-index .kpi-delta.state-muted{
  color:#64748b;
}

:root[data-theme="light"] body.page-index .kpi-val{
  color:#111827;
}

:root[data-theme="light"] body.page-index .trend-title{
  color:#334155;
}

:root[data-theme="light"] body.page-index .trend-text{
  color:#0f766e;
}

:root[data-theme="light"] body.page-index .trend-text.good{
  color:#0f766e;
}

:root[data-theme="light"] body.page-index .trend-text.warn{
  color:#b45309;
}

:root[data-theme="light"] body.page-index .trend-text.muted{
  color:#334155;
}

:root[data-theme="light"] body.page-index .trend-delta{
  border-color:#dbe5ef;
  background:#f8fafc;
  color:#334155;
}

:root[data-theme="light"] body.page-index .section-head h2{
  color:#111827;
  text-shadow:none;
}

:root[data-theme="light"] body.page-index .section-head h2::before{
  background:linear-gradient(180deg, #0f766e, rgba(15,118,110,.25));
}

:root[data-theme="light"] body.page-index .section-count{
  color:#64748b;
}

:root[data-theme="light"] body.page-index .section-actions .search{
  background:#ffffff;
  border-color:#dce5ef;
}

:root[data-theme="light"] body.page-index .section-actions .search input{
  color:#1e293b;
}

:root[data-theme="light"] body.page-index table{
  border-color:#dce5ef;
  background:#ffffff;
  box-shadow:0 8px 20px rgba(15,23,42,.06);
}

:root[data-theme="light"] body.page-index thead th{
  color:#64748b;
  background:linear-gradient(180deg, #f8fafc, #f1f5f9);
  border-bottom:1px solid #e2e8f0;
}

:root[data-theme="light"] body.page-index tbody td{
  color:#0f172a;
  border-bottom:1px solid #edf2f7;
}

:root[data-theme="light"] body.page-index tbody tr:hover td{
  background:rgba(13,242,204,.08);
}

:root[data-theme="light"] body.page-index .pill.warn{
  color:#475569;
  background:#f1f5f9;
}

:root[data-theme="light"] body.page-index #dietTable .lift-main,
:root[data-theme="light"] body.page-index #workTable .lift-main{
  color:#1e293b;
}

:root[data-theme="light"] body.page-index #dietTable .lift-delta,
:root[data-theme="light"] body.page-index #workTable .lift-delta{
  color:#0f766e;
}

:root[data-theme="light"] body.page-index #dietTable .mono,
:root[data-theme="light"] body.page-index #workTable .mono{
  color:#334155;
}

:root[data-theme="light"] body.page-index .toast{
  border-color:#dbe5ef;
  background:linear-gradient(180deg, #ffffff, #f8fafc);
}

@media (max-width: 920px){
  :root[data-theme="light"] body.page-index .actions{
    border-color:#dce5ef;
    background:linear-gradient(180deg, rgba(255,255,255,.98), rgba(248,251,255,.96));
    box-shadow:0 8px 18px rgba(15,23,42,.08);
  }
}

/* ---------- Help + Changelog ---------- */
body.page-help,
body.page-changelog{
  background:
    radial-gradient(920px 560px at -12% -22%, rgba(13,242,204,.16), transparent 62%),
    radial-gradient(900px 560px at 116% -22%, rgba(16,185,129,.13), transparent 60%),
    linear-gradient(180deg, #071a17 0%, #041411 58%, #05110f 100%);
}

body.page-help .topbar,
body.page-changelog .topbar{
  background:linear-gradient(180deg, rgba(8,26,23,.90), rgba(8,26,23,.72));
  border-bottom:1px solid rgba(13,242,204,.12);
}

body.page-help .help-wrap,
body.page-changelog .changelog-wrap{
  max-width:1020px;
  padding-top:26px;
}

body.page-help .help-top h1{
  font-size:46px;
  line-height:1.05;
  letter-spacing:-.03em;
}

body.page-help .help-top p{
  color:rgba(184,223,214,.70);
  max-width:72ch;
}

body.page-help .help-search{
  border-radius:14px;
  border:1px solid rgba(255,255,255,.16);
  background:rgba(255,255,255,.05);
}

body.page-help .help-search input{
  font-size:14px;
}

body.page-help .toc{
  gap:10px;
}

body.page-help .toc a{
  border-radius:999px;
  border:1px solid rgba(255,255,255,.16);
  background:rgba(255,255,255,.05);
  color:#c5ede4;
  font-size:12px;
  padding:9px 12px;
}

body.page-help .toc a:hover{
  border-color:rgba(13,242,204,.38);
  color:#e7fff9;
}

body.page-help .panel,
body.page-changelog .release,
body.page-changelog .changelog-intro{
  border-radius:14px;
  border:1px solid rgba(13,242,204,.16);
  background:linear-gradient(180deg, rgba(8,30,26,.72), rgba(5,20,17,.56));
  box-shadow:0 10px 28px rgba(0,0,0,.24);
}

body.page-help .panel summary{
  min-height:62px;
}

body.page-help .panel h2{
  font-size:14px;
  font-weight:800;
}

body.page-help .panel .body{
  color:rgba(188,223,214,.72);
}

body.page-help .k,
body.page-help .code{
  border-color:rgba(255,255,255,.16);
  background:rgba(0,0,0,.24);
}

body.page-changelog .changelog-intro h2,
body.page-changelog .release-head h2{
  letter-spacing:-.02em;
}

body.page-changelog .release-date{
  border-color:rgba(255,255,255,.16);
  background:rgba(255,255,255,.05);
}

body.page-changelog .release-list{
  color:#dbf2ec;
}

/* ---------- Help + Changelog Light ---------- */
:root[data-theme="light"] body.page-help,
:root[data-theme="light"] body.page-changelog{
  background:
    radial-gradient(860px 540px at -18% -24%, rgba(13,242,204,.17), transparent 62%),
    radial-gradient(860px 540px at 118% -26%, rgba(251,191,36,.17), transparent 60%),
    linear-gradient(180deg, #f4f7fa 0%, #edf1f4 64%, #eaedf0 100%);
}

:root[data-theme="light"] body.page-help .topbar,
:root[data-theme="light"] body.page-changelog .topbar{
  background:linear-gradient(180deg, rgba(255,255,255,.92), rgba(248,251,255,.90));
  border-bottom:1px solid rgba(148,163,184,.28);
}

:root[data-theme="light"] body.page-help .help-top p{
  color:#64748b;
}

:root[data-theme="light"] body.page-help .help-top h1{
  color:#0f172a;
}

:root[data-theme="light"] body.page-help .help-search{
  border-color:#dbe5ef;
  background:#ffffff;
}

:root[data-theme="light"] body.page-help .help-search input{
  color:#0f172a;
}

:root[data-theme="light"] body.page-help .toc a{
  border-color:#dbe5ef;
  background:#ffffff;
  color:#475569;
}

:root[data-theme="light"] body.page-help .toc a:hover{
  color:#0f766e;
  border-color:rgba(15,118,110,.35);
}

:root[data-theme="light"] body.page-help .panel,
:root[data-theme="light"] body.page-changelog .release,
:root[data-theme="light"] body.page-changelog .changelog-intro{
  background:linear-gradient(180deg, rgba(255,255,255,.95), rgba(247,250,253,.92));
  border-color:rgba(148,163,184,.24);
  box-shadow:0 10px 24px rgba(15,23,42,.06);
}

:root[data-theme="light"] body.page-help .panel h2,
:root[data-theme="light"] body.page-changelog .release-head h2,
:root[data-theme="light"] body.page-changelog .changelog-intro h2{
  color:#0f172a;
}

:root[data-theme="light"] body.page-help .caret{
  color:#64748b;
}

:root[data-theme="light"] body.page-help .panel .body{
  color:#475569;
}

:root[data-theme="light"] body.page-help .k{
  border-color:#dbe5ef;
  background:#f8fafc;
  color:#0f172a;
}

:root[data-theme="light"] body.page-help .code{
  border-color:#dbe5ef;
  background:#f8fafc;
  color:#0f172a;
}

:root[data-theme="light"] body.page-changelog .release-date{
  border-color:#dbe5ef;
  background:#f8fafc;
  color:#475569;
}

:root[data-theme="light"] body.page-changelog .release-list{
  color:#0f172a;
}

:root[data-theme="light"] body.page-changelog .release-sub{
  color:#475569;
}

:root[data-theme="light"] #dietModal .preview-sub,
:root[data-theme="light"] #workoutModal .exercise-help{
  color:#64748b;
}

:root[data-theme="light"] #dietModal .preview-title{
  color:#0f172a;
}

:root[data-theme="light"] #dietModal .photo-preview{
  background:#f8fbfd;
  border-color:#dbe5ef;
}

/* ---------- Login ---------- */
body.page-login{
  background:
    radial-gradient(760px 460px at 8% -16%, rgba(13,242,204,.18), transparent 58%),
    radial-gradient(760px 460px at 92% -18%, rgba(245,158,11,.16), transparent 56%),
    linear-gradient(180deg, #071a17 0%, #041411 62%, #05110f 100%);
}

body.page-login .topbar{
  background:linear-gradient(180deg, rgba(8,26,23,.90), rgba(8,26,23,.72));
  border-bottom:1px solid rgba(13,242,204,.12);
}

body.page-login .login-wrap{
  max-width:520px;
  padding-top:42px;
}

body.page-login .login-card{
  padding:18px;
  border-radius:14px;
  border:1px solid rgba(13,242,204,.16);
  background:linear-gradient(180deg, rgba(8,30,26,.72), rgba(5,20,17,.56));
}

body.page-login .login-card h2{
  margin:0;
  font-size:24px;
}

body.page-login .login-card p{
  margin:8px 0 0;
  color:rgba(184,223,214,.78);
}

body.page-login .login-form{
  margin-top:14px;
  display:grid;
  gap:12px;
}

body.page-login .login-error{
  margin-top:12px;
  padding:10px 12px;
  border-radius:10px;
  border:1px solid rgba(255,77,125,.40);
  background:rgba(255,77,125,.16);
  color:#ffd5df;
  font-size:13px;
  font-weight:700;
}

body.page-login .login-form .btn{
  justify-content:center;
}

:root[data-theme="light"] body.page-login{
  background:
    radial-gradient(760px 460px at 8% -16%, rgba(13,242,204,.16), transparent 58%),
    radial-gradient(760px 460px at 92% -18%, rgba(245,158,11,.12), transparent 56%),
    linear-gradient(180deg, #f5f8fb 0%, #eef2f6 62%, #e9eef3 100%);
}

:root[data-theme="light"] body.page-login .topbar{
  background:linear-gradient(180deg, rgba(255,255,255,.94), rgba(247,250,254,.90));
  border-bottom:1px solid rgba(148,163,184,.26);
}

:root[data-theme="light"] body.page-login .login-card{
  border-color:rgba(148,163,184,.24);
  background:linear-gradient(180deg, rgba(255,255,255,.95), rgba(247,250,253,.92));
  box-shadow:0 10px 24px rgba(15,23,42,.06);
}

:root[data-theme="light"] body.page-login .login-card h2{
  color:#0f172a;
}

:root[data-theme="light"] body.page-login .login-card p{
  color:#475569;
}

:root[data-theme="light"] body.page-login .login-error{
  color:#7f1d1d;
  background:#fee2e2;
  border-color:#fecaca;
}

/* ---------- Responsive polish ---------- */
@media (max-width: 1080px){
  body.page-index .title h1{
    font-size:32px;
  }
  body.page-index .kpi-val{
    font-size:48px;
  }
  body.page-index .section-head h2{
    font-size:30px;
  }
  body.page-index .section-actions .search{
    width:min(360px, 100%);
  }
}

@media (max-width: 820px){
  body.page-index .actions .btn{
    flex:1 1 46%;
  }
  body.page-index .summary-controls{
    grid-template-columns:1fr 1fr;
  }
  body.page-index .kpi{
    min-height:140px;
  }
  body.page-index .kpi-val{
    font-size:40px;
  }
  body.page-index .section-head h2{
    font-size:28px;
  }
  body.page-index .trend-text{
    font-size:17px;
  }
  body.page-help .help-top h1{
    font-size:34px;
  }
}

@media (max-width: 920px){
  body.page-index .head{
    display:grid;
    grid-template-columns:minmax(0, 1fr) auto;
    align-items:center;
    gap:8px;
  }

  body.page-index .title{
    min-width:0;
  }

  body.page-index .menu-toggle{
    display:inline-flex;
    justify-content:center;
    align-self:center;
  }

  body.page-index .menu-toggle + .actions{
    display:none;
    grid-column:1 / -1;
    flex-direction:column;
    align-items:stretch;
    gap:8px;
    padding:8px;
    border:1px solid rgba(13,242,204,.18);
    border-radius:12px;
    background:linear-gradient(180deg, rgba(8,28,24,.70), rgba(6,20,18,.58));
    box-shadow:0 10px 22px rgba(0,0,0,.24);
  }

  body.page-index .menu-toggle + .actions.is-open{
    display:flex;
  }

  body.page-index .actions .btn{
    width:100%;
    justify-content:flex-start;
    flex:0 0 auto;
    min-width:0;
    white-space:normal;
  }
}

@media (max-width: 640px){
  body.page-index .title h1{
    font-size:30px;
  }
  body.page-index .section-head h2{
    font-size:26px;
  }
  body.page-index .section-actions{
    width:100%;
    align-items:stretch;
  }
  body.page-index .section-actions .search,
  body.page-index .section-actions .btn{
    width:100%;
  }
  body.page-index .section-actions .section-quick{
    width:auto;
  }
  body.page-index .actions .btn{
    flex:1 1 100%;
  }
  body.page-index .summary-controls{
    grid-template-columns:1fr;
  }
  body.page-index .trend-text{
    font-size:16px;
  }
  body.page-index .trend-delta{
    font-size:12px;
  }
  body.page-help .help-wrap,
  body.page-changelog .changelog-wrap{
    padding-inline:14px;
  }
}

/* ---------- Mobile target (Samsung S10+ first pass) ---------- */
@media (max-width: 430px){
  html{
    -webkit-text-size-adjust:100%;
    text-size-adjust:100%;
  }

  body.page-index .topbar .wrap{
    padding:10px 10px;
  }

  body.page-index .wrap{
    padding:12px 10px 92px;
  }

  body.page-index .head{
    display:grid;
    grid-template-columns:minmax(0, 1fr) auto;
    align-items:center;
    gap:8px;
  }

  body.page-index .title{
    min-width:0;
  }

  body.page-index .title h1{
    font-size:30px;
  }

  body.page-index .menu-toggle{
    display:inline-flex;
    justify-content:center;
    align-self:center;
  }

  body.page-index .menu-toggle + .actions{
    display:none;
    grid-column:1 / -1;
    flex-direction:column;
    align-items:stretch;
    gap:8px;
    padding:8px;
    border:1px solid rgba(13,242,204,.18);
    border-radius:12px;
    background:linear-gradient(180deg, rgba(8,28,24,.70), rgba(6,20,18,.58));
    box-shadow:0 10px 22px rgba(0,0,0,.24);
  }

  body.page-index .menu-toggle + .actions.is-open{
    display:flex;
  }

  body.page-index .actions .btn{
    width:100%;
    justify-content:flex-start;
    flex:0 0 auto;
    min-width:0;
    height:38px;
    padding:0 12px;
    font-size:12px;
    white-space:normal;
  }

  body.page-index .actions .btn svg{
    width:14px;
    height:14px;
  }

  body.page-index .summary-bar{
    padding:10px;
    margin-top:2px;
  }

  body.page-index .summary-controls{
    grid-template-columns:1fr;
    gap:6px;
  }

  body.page-index .summary-controls .field label{
    font-size:10px;
  }

  body.page-index .summary-controls input,
  body.page-index .summary-controls select{
    height:34px;
    font-size:12px;
    padding:8px 10px;
  }

  body.page-index .summary-controls .btn{
    height:34px;
    font-size:11px;
    padding:0 10px;
  }

  body.page-index .summary-caption{
    margin-top:8px;
    font-size:11px;
  }

  body.page-index .kpis{
    grid-template-columns:repeat(2, minmax(0, 1fr));
    gap:8px;
  }

  body.page-index .kpi{
    min-height:114px;
    padding:12px;
    gap:4px;
  }

  body.page-index .kpi-title{
    font-size:10px;
    letter-spacing:.08em;
  }

  body.page-index .kpi-period{
    font-size:9.8px;
  }

  body.page-index .kpi-val{
    font-size:36px;
    line-height:1;
  }

  body.page-index .kpi-sub{
    font-size:11px;
  }

  body.page-index .kpi-delta{
    margin-top:4px;
    font-size:10.5px;
  }

  body.page-index .trend-line{
    margin-top:8px;
    padding:12px;
  }

  body.page-index .trend-title{
    font-size:11px;
  }

  body.page-index .trend-text{
    font-size:16px;
  }

  body.page-index .trend-delta{
    margin-top:8px;
    padding:8px 10px;
    font-size:11px;
  }

  body.page-index .section{
    margin-top:14px;
  }

  body.page-index .section-head{
    margin:0 0 6px;
    gap:8px;
  }

  body.page-index .section-title-row{
    gap:8px;
  }

  body.page-index .section-head h2{
    font-size:28px;
    padding-left:10px;
  }

  body.page-index .section-head h2::before{
    width:5px;
    height:22px;
  }

  body.page-index .section-actions{
    display:grid;
    grid-template-columns:minmax(0, 1fr) auto;
    width:100%;
    gap:8px;
    align-items:center;
  }

  body.page-index .section-actions .search{
    width:100%;
    min-width:0;
    height:38px;
    padding:0 9px;
    border-radius:10px;
  }

  body.page-index .section-actions .search input{
    font-size:12px;
  }

  body.page-index .section-actions .btn{
    height:38px;
    padding:0 10px;
    border-radius:10px;
    font-size:11.5px;
    white-space:nowrap;
  }

  body.page-index .section-actions .section-quick{
    grid-column:1 / -1;
    justify-content:center;
    width:100%;
  }

  body.page-index .supplements-actions{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:8px;
  }

  body.page-index .supplements-actions-left{
    display:flex;
    align-items:center;
    gap:8px;
    flex-wrap:wrap;
  }

  body.page-index .supplements-actions-right{
    margin-left:auto;
    min-width:min(420px, 58vw);
    display:grid;
    grid-template-columns:minmax(0, 1fr) auto;
    align-items:center;
    gap:8px;
  }

  body.page-index .supplements-actions .section-quick{
    grid-column:auto;
    justify-content:center;
    width:auto;
  }

  body.page-index .supplements-actions .supplements-actions-right .search{
    width:100%;
    min-width:0;
  }

  body.page-index .table{
    overflow-x:auto;
    overflow-y:hidden;
    -webkit-overflow-scrolling:touch;
    padding-bottom:2px;
  }

  body.page-index #dietTable{
    min-width:960px;
  }

  body.page-index #workTable{
    min-width:980px;
  }

  body.page-index thead th{
    height:auto;
    padding:10px 8px;
    font-size:10px;
  }

  body.page-index tbody td{
    height:auto;
    padding:10px 8px;
    font-size:12px;
  }

  body.page-index #dietTable td,
  body.page-index #workTable td{
    font-size:12px;
  }

  body.page-index #dietTable td .mono,
  body.page-index #workTable td .mono{
    font-size:11px;
  }

  body.page-index .pill{
    font-size:11px;
    padding:4px 8px;
  }

  body.page-index #dietTable .photo-pill{
    font-size:11px;
    padding:6px 10px;
  }

  body.page-index .app-footer{
    margin-top:14px;
    gap:8px;
    padding:10px;
  }

  body.page-index .app-footer .sync-state{
    flex:1 0 100%;
    margin-right:0;
    font-size:10.5px;
  }

  body.page-index .app-footer .btn{
    flex:1 1 0;
    justify-content:center;
    height:36px;
    font-size:11.5px;
    padding:0 10px;
  }

  body.page-index .app-footer .btn.icon-only{
    flex:0 0 36px;
    width:36px;
    min-width:36px;
    padding:0;
  }

  body.page-index .toast{
    right:10px;
    bottom:64px;
    width:calc(100vw - 20px);
  }

  .fab-dock{
    position:fixed;
    right:10px;
    bottom:10px;
    z-index:120;
    display:flex;
    flex-direction:column;
    align-items:flex-end;
    gap:0;
  }

  .fab-dock .fab-main{
    width:50px;
    height:50px;
  }

  .fab-dock .fab-menu{
    margin-bottom:8px;
  }

  .fab-dock .fab-menu .fab-btn{
    height:40px;
    padding:0 12px;
    font-size:12px;
  }

  #dietModal,
  #workoutModal{
    width:min(96vw, 520px);
  }

  #dietModal .modal-head,
  #workoutModal .modal-head{
    padding:14px 14px 10px;
  }

  #dietModal .modal-title{
    font-size:22px;
  }

  #workoutModal .modal-title{
    font-size:24px;
  }

  #dietModal .modal-sub,
  #workoutModal .modal-sub{
    font-size:12px;
  }

  #dietModal .modal-body,
  #workoutModal .modal-body{
    padding:0 14px 14px;
  }

  #dietModal .modal-actions,
  #workoutModal .modal-actions{
    margin:12px -14px -14px;
    padding:12px 14px;
    gap:8px;
  }

  #dietModal .modal-actions .btn,
  #workoutModal .modal-actions .btn{
    height:38px;
    font-size:12px;
  }

  #dietModal .modal-actions .btn.primary,
  #workoutModal .modal-actions .btn.primary{
    min-width:0;
  }
}

/* =========================
   Stitch Remozado - Phase 1 Step 2
   (mobile clarity + nav + modal polish)
========================= */
body.page-index .head{
  align-items:center;
}

body.page-index .menu-toggle{
  margin-left:auto;
}

body.page-index .actions.top-actions-compact{
  width:100%;
}

body.page-index .actions.top-actions-compact .btn{
  flex:1 1 0;
}

body.page-index .view-nav{
  display:grid;
  grid-template-columns:repeat(6, minmax(0, 1fr));
  gap:8px;
  padding:10px;
}

body.page-index .view-tab{
  min-height:44px;
  border-radius:12px;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  padding:0 10px;
  white-space:nowrap;
}

body.page-index .view-tab .view-ico{
  width:16px;
  height:16px;
  display:grid;
  place-items:center;
  opacity:.9;
}

body.page-index .view-tab .view-ico svg{
  width:100%;
  height:100%;
}

body.page-index .summary-controls{
  align-items:end;
}

body.page-index .summary-controls .btn{
  min-height:40px;
}

body.page-index .section-actions .search{
  height:40px;
}

body.page-index .section-actions .btn{
  height:40px;
}

body.page-index .data-hub-grid{
  grid-template-columns:repeat(3, minmax(0, 1fr));
}

body.page-index .data-hub-grid .btn{
  min-height:70px;
  align-items:flex-start;
  justify-content:flex-start;
  padding:12px 12px;
  border-radius:12px;
}

body.page-index .mobile-view-tab{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:2px;
}

body.page-index .mobile-view-ico{
  width:18px;
  height:18px;
  display:grid;
  place-items:center;
  opacity:.9;
}

body.page-index .mobile-view-ico svg{
  width:100%;
  height:100%;
}

body.page-index .mobile-view-label{
  font-size:10px;
  font-weight:700;
  letter-spacing:.04em;
}

/* Keep lightbox frame always centered */
.lightbox{
  inset:0;
  margin:auto;
}

.lightbox-shell{
  width:100%;
  margin-inline:auto;
}

.lightbox-stage{
  justify-items:center;
}

.lightbox-frame{
  justify-items:center;
  align-items:center;
}

#lightboxImg{
  display:block;
  margin-inline:auto;
}

/* Modal polish closer to stitch references */
#dietModal,
#workoutModal{
  border:1px solid rgba(13,242,204,.18);
  border-radius:16px;
  overflow:hidden;
}

#dietModal .modal-head,
#workoutModal .modal-head{
  padding:18px 20px 12px;
  border-bottom:1px solid rgba(255,255,255,.08);
}

#dietModal .modal-body,
#workoutModal .modal-body{
  padding:14px 20px 18px;
}

#dietModal label,
#workoutModal label{
  text-transform:uppercase;
  letter-spacing:.08em;
  font-size:10.5px;
  font-weight:800;
}

#dietModal input,
#dietModal select,
#dietModal textarea,
#workoutModal input,
#workoutModal select,
#workoutModal textarea{
  min-height:44px;
  border-radius:12px;
}

#workoutModal textarea{
  min-height:108px;
}

#dietModal .modal-actions,
#workoutModal .modal-actions{
  margin:14px -20px -18px;
  padding:14px 20px;
  border-top:1px solid rgba(255,255,255,.08);
}

/* Help + changelog final pass */
body.page-help .help-wrap,
body.page-changelog .changelog-wrap{
  max-width:1120px;
}

body.page-help .help-top{
  display:grid;
  grid-template-columns:minmax(0, 1fr) minmax(300px, 420px);
  gap:16px;
  align-items:end;
}

body.page-help .help-actions{
  justify-self:end;
  width:100%;
}

body.page-help .help-search{
  width:100%;
}

body.page-changelog .release-list li{
  margin-bottom:8px;
  line-height:1.5;
}

body.page-login .login-wrap{
  max-width:460px;
  padding-top:52px;
}

body.page-login .login-card{
  border-radius:16px;
  padding:22px;
}

@media (max-width: 1200px){
  body.page-index .data-hub-grid{
    grid-template-columns:repeat(2, minmax(0, 1fr));
  }
}

@media (max-width: 920px){
  body.page-index .view-nav{
    display:none;
  }

  body.page-index .menu-toggle{
    display:inline-flex;
  }

  body.page-index .menu-toggle + .actions{
    display:none;
    grid-column:1 / -1;
  }

  body.page-index .menu-toggle + .actions.is-open{
    display:flex;
  }

  body.page-index .mobile-view-nav{
    display:grid;
    grid-template-columns:repeat(5, minmax(0, 1fr));
    min-height:68px;
    padding:8px 8px calc(8px + env(safe-area-inset-bottom));
  }

  body.page-index .mobile-view-tab{
    min-height:50px;
    border-radius:10px;
    padding:4px 2px;
  }

  body.page-index .mobile-view-tab.is-active{
    box-shadow:0 10px 20px rgba(0,0,0,.18);
  }

  body.page-index .app-shell{
    padding-bottom:108px;
  }

  body.page-help .help-top{
    grid-template-columns:1fr;
    align-items:start;
  }
}

@media (max-width: 430px){
  body.page-index .topbar{
    top:0;
  }

  body.page-index .topbar .wrap{
    padding:10px 10px;
  }

  body.page-index .head{
    grid-template-columns:minmax(0, 1fr) auto;
    gap:8px;
  }

  body.page-index .brand-mark{
    width:40px;
    height:40px;
  }

  body.page-index .title h1{
    font-size:28px;
  }

  body.page-index .menu-toggle{
    height:40px;
    border-radius:11px;
    padding:0 11px;
    font-size:12px;
  }

  body.page-index .menu-toggle + .actions{
    padding:10px;
    gap:8px;
    border-radius:12px;
  }

  body.page-index .menu-toggle + .actions .btn{
    min-height:44px;
    justify-content:flex-start;
  }

  body.page-index .summary-controls{
    grid-template-columns:1fr;
    gap:8px;
  }

  body.page-index .summary-controls .field label{
    font-size:10px;
  }

  body.page-index .summary-controls input,
  body.page-index .summary-controls select,
  body.page-index .summary-controls .btn{
    height:40px;
  }

  body.page-index .kpis{
    gap:8px;
  }

  body.page-index .kpi{
    min-height:126px;
    padding:12px;
  }

  body.page-index .kpi-val{
    font-size:44px;
  }

  body.page-index .home-quick-actions{
    grid-template-columns:1fr;
  }

  body.page-index .section-head h2{
    font-size:26px;
    padding-left:10px;
  }

  body.page-index .section-actions{
    display:grid;
    grid-template-columns:1fr;
    gap:8px;
  }

  body.page-index .section-actions .search,
  body.page-index .section-actions .btn{
    width:100%;
    min-width:0;
  }

  body.page-index .section-actions .section-quick{
    order:-1;
  }

  body.page-index .supplements-actions{
    display:grid;
    grid-template-columns:1fr;
    gap:8px;
  }

  body.page-index .supplements-actions-left{
    display:grid;
    grid-template-columns:1fr;
    gap:8px;
  }

  body.page-index .supplements-actions-right{
    display:grid;
    grid-template-columns:1fr;
    gap:8px;
    margin-left:0;
    min-width:0;
  }

  body.page-index .supplements-actions .section-quick{
    order:0;
    width:100%;
  }

  body.page-index .supplements-actions .supplements-actions-right .search,
  body.page-index .supplements-actions .supplements-actions-right .limit-select{
    width:100%;
    min-width:0;
  }

  body.page-index .data-hub-grid{
    grid-template-columns:1fr;
  }

  body.page-index .mobile-view-nav{
    left:8px;
    right:8px;
    bottom:8px;
    border-radius:14px;
  }

  body.page-index .fab-dock{
    right:10px;
    bottom:84px;
  }

  body.page-index .fab-main{
    width:52px;
    height:52px;
  }

  body.page-index [data-view="checkin"] .table,
  body.page-index [data-view="workouts"] .table{
    overflow:visible;
    border:none;
    background:transparent;
    box-shadow:none;
    padding:0;
  }

  body.page-index [data-view="checkin"] table,
  body.page-index [data-view="workouts"] table{
    min-width:0;
    border:none;
    background:transparent;
    box-shadow:none;
  }

  body.page-index [data-view="checkin"] thead,
  body.page-index [data-view="workouts"] thead{
    display:none;
  }

  body.page-index [data-view="checkin"] tbody,
  body.page-index [data-view="workouts"] tbody{
    display:grid;
    gap:10px;
  }

  body.page-index [data-view="checkin"] tbody tr.data-row,
  body.page-index [data-view="workouts"] tbody tr.data-row{
    display:grid;
    grid-template-columns:repeat(2, minmax(0, 1fr));
    gap:8px 10px;
    padding:12px;
    border:1px solid rgba(13,242,204,.18);
    border-radius:13px;
    background:linear-gradient(180deg, rgba(9,30,26,.82), rgba(6,20,18,.68));
  }

  body.page-index [data-view="checkin"] tbody tr.data-row td,
  body.page-index [data-view="workouts"] tbody tr.data-row td{
    min-height:0;
    height:auto;
    padding:0;
    border:0 !important;
    display:flex;
    flex-direction:column;
    align-items:flex-start;
    gap:4px;
    font-size:12.5px;
    line-height:1.3;
    color:#e8f4f1;
  }

  body.page-index [data-view="checkin"] tbody tr.data-row td::before,
  body.page-index [data-view="workouts"] tbody tr.data-row td::before{
    content:attr(data-label);
    font-size:9px;
    line-height:1;
    font-weight:800;
    letter-spacing:.1em;
    text-transform:uppercase;
    color:rgba(173,207,198,.76);
  }

  body.page-index [data-view="checkin"] tbody tr.data-row td:nth-child(1),
  body.page-index [data-view="checkin"] tbody tr.data-row td:nth-child(9),
  body.page-index [data-view="checkin"] tbody tr.data-row td:nth-child(10),
  body.page-index [data-view="workouts"] tbody tr.data-row td:nth-child(1),
  body.page-index [data-view="workouts"] tbody tr.data-row td:nth-child(7),
  body.page-index [data-view="workouts"] tbody tr.data-row td:nth-child(8){
    grid-column:1 / -1;
  }

  body.page-index [data-view="checkin"] tbody tr.data-row .photo-pill{
    min-height:34px;
    padding:6px 12px;
  }

  body.page-index [data-view="workouts"] tbody tr.data-row .lift-main{
    font-size:12px;
    line-height:1.35;
  }

  body.page-index [data-view="workouts"] tbody tr.data-row .lift-delta{
    font-size:11px;
    color:#58e6cf;
  }

  .lightbox-shell{
    width:100vw;
    padding:10px;
    min-height:100vh;
    box-sizing:border-box;
  }

  .lightbox-topbar{
    gap:8px;
  }

  .lightbox-frame{
    width:min(96vw, 680px);
    min-height:240px;
    padding:10px;
  }

  #lightboxImg{
    max-height:56vh;
  }

  #dietModal,
  #workoutModal{
    width:min(96vw, 640px);
  }
}

@media (max-width: 430px){
  :root[data-theme="light"] body.page-index [data-view="checkin"] tbody tr.data-row,
  :root[data-theme="light"] body.page-index [data-view="workouts"] tbody tr.data-row{
    border-color:#dbe5ef;
    background:linear-gradient(180deg, #ffffff, #f8fafc);
  }

  :root[data-theme="light"] body.page-index [data-view="checkin"] tbody tr.data-row td,
  :root[data-theme="light"] body.page-index [data-view="workouts"] tbody tr.data-row td{
    color:#0f172a;
  }

  :root[data-theme="light"] body.page-index [data-view="checkin"] tbody tr.data-row td::before,
  :root[data-theme="light"] body.page-index [data-view="workouts"] tbody tr.data-row td::before{
    color:#64748b;
  }

  :root[data-theme="light"] body.page-index [data-view="workouts"] tbody tr.data-row .lift-main{
    color:#0f172a;
  }

  :root[data-theme="light"] body.page-index [data-view="workouts"] tbody tr.data-row .lift-delta{
    color:#0f766e;
  }
}

/* =========================
   Stitch Remozado - Phase 1 Step 3
   (single-row header + desktop FAB)
========================= */
body.page-index .head{
  display:grid;
  grid-template-columns:auto minmax(0, 1fr) auto auto;
  align-items:center;
  gap:14px;
  flex-wrap:nowrap;
}

body.page-index .brand-sub{
  display:none;
}

body.page-index .title{
  min-width:0;
}

body.page-index .title h1{
  font-size:34px;
  line-height:1.08;
  padding-bottom:2px;
}

body.page-index .view-nav.top-nav-inline{
  width:100%;
  margin:0;
  padding:0;
  border:none;
  background:transparent;
  box-shadow:none;
  display:flex;
  flex-wrap:nowrap;
  align-items:center;
  justify-content:center;
  gap:16px;
}

body.page-index .view-nav.top-nav-inline .view-tab{
  min-height:0;
  padding:0 0 6px;
  border:none;
  border-radius:0;
  color:rgba(184,212,204,.76);
  background:transparent;
  font-size:14px;
  font-weight:700;
  position:relative;
}

body.page-index .view-nav.top-nav-inline .view-tab::after{
  content:"";
  position:absolute;
  left:0;
  right:0;
  bottom:-1px;
  height:2px;
  border-radius:999px;
  background:transparent;
  transition:background .15s ease;
}

body.page-index .view-nav.top-nav-inline .view-tab.is-active{
  color:var(--text);
  border:none;
  background:transparent;
}

body.page-index .view-nav.top-nav-inline .view-tab.is-active::after{
  background:linear-gradient(90deg, var(--brand), var(--brand2));
}

body.page-index .view-nav.top-nav-inline .view-tab .view-ico{
  display:none;
}

body.page-index .menu-toggle{
  display:none;
  margin-left:0;
}

body.page-index .actions.top-actions-compact{
  width:auto;
  margin-left:0;
  display:flex;
  align-items:center;
  gap:8px;
  flex-wrap:nowrap;
}

body.page-index .actions.top-actions-compact .top-tool-btn{
  width:40px;
  min-width:40px;
  height:40px;
  min-height:40px;
  padding:0;
  border-radius:10px;
  justify-content:center;
  position:relative;
}

body.page-index .actions.top-actions-compact .top-tool-btn svg{
  width:18px;
  height:18px;
}

body.page-index .actions.top-actions-compact .top-tool-btn .btn-label{
  position:absolute;
  width:1px;
  height:1px;
  padding:0;
  margin:-1px;
  overflow:hidden;
  clip:rect(0, 0, 0, 0);
  white-space:nowrap;
  border:0;
}

body.page-index .app-shell{
  padding-top:8px;
}

body.page-index .fab-dock{
  display:none;
}

body.page-index .fab-main{
  width:56px;
  height:56px;
}

body.page-index .fab-menu .fab-btn{
  min-width:156px;
  justify-content:flex-start;
}

body.page-index .fab-menu .fab-btn.fab-supplements{
  background:linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.05));
}

@media (max-width: 1080px){
  body.page-index .head{
    grid-template-columns:auto minmax(0, 1fr) auto;
  }

  body.page-index .view-nav.top-nav-inline{
    gap:12px;
    justify-content:flex-start;
    overflow-x:auto;
    padding-bottom:2px;
  }

  body.page-index .view-nav.top-nav-inline::-webkit-scrollbar{
    height:0;
  }
}

@media (max-width: 920px){
  body.page-index .head{
    grid-template-columns:minmax(0, 1fr) auto;
    align-items:center;
    gap:8px;
  }

  body.page-index .view-nav.top-nav-inline{
    display:none;
  }

  body.page-index .menu-toggle{
    display:inline-flex;
    margin-left:auto;
  }

  body.page-index .actions.top-actions-compact{
    display:none;
    grid-column:1 / -1;
    width:100%;
    flex-direction:column;
    align-items:stretch;
    gap:8px;
    padding:10px;
    border:1px solid rgba(13,242,204,.18);
    border-radius:12px;
    background:linear-gradient(180deg, rgba(8,28,24,.72), rgba(6,20,18,.6));
    box-shadow:0 10px 22px rgba(0,0,0,.24);
  }

  body.page-index .actions.top-actions-compact.is-open{
    display:flex;
  }

  body.page-index .actions.top-actions-compact .top-tool-btn{
    width:100%;
    min-width:0;
    height:40px;
    min-height:40px;
    padding:0 12px;
    justify-content:flex-start;
    border-radius:10px;
    gap:8px;
  }

  body.page-index .actions.top-actions-compact .top-tool-btn .btn-label{
    position:static;
    width:auto;
    height:auto;
    margin:0;
    overflow:visible;
    clip:auto;
    white-space:normal;
  }

  body.page-index .fab-dock{
    position:fixed;
    right:max(16px, env(safe-area-inset-right));
    bottom:max(18px, env(safe-area-inset-bottom));
    z-index:120;
    display:flex;
    flex-direction:column;
    align-items:flex-end;
    gap:0;
  }
}

@media (max-width: 430px){
  body.page-index .title h1{
    font-size:30px;
  }

  body.page-index .fab-dock{
    right:10px;
    bottom:84px;
  }
}

:root[data-theme="light"] body.page-index .view-nav.top-nav-inline .view-tab{
  color:rgba(61,83,109,.82);
}

:root[data-theme="light"] body.page-index .view-nav.top-nav-inline .view-tab.is-active{
  color:#0f172a;
}

:root[data-theme="light"] body.page-index .actions.top-actions-compact{
  background:transparent;
}

:root[data-theme="light"] body.page-index .actions.top-actions-compact .top-tool-btn{
  border-color:rgba(15,23,42,.14);
  background:linear-gradient(180deg, rgba(255,255,255,.92), rgba(246,250,255,.86));
  color:#0f172a;
}

/* =========================
   Help page shell aligned with index header/footer
========================= */
body.page-help .topbar .wrap{
  padding:14px 18px;
}

body.page-help .head{
  display:grid;
  grid-template-columns:auto minmax(0, 1fr) auto auto;
  align-items:center;
  gap:14px;
  flex-wrap:nowrap;
}

body.page-help .brand-title{
  text-decoration:none;
  color:var(--text);
  display:flex;
  align-items:center;
  gap:12px;
}

body.page-help .brand-mark{
  width:44px;
  height:44px;
  border-radius:12px;
  display:grid;
  place-items:center;
  color:#062b23;
  background:linear-gradient(145deg, #2bf0d4, #f7b42c);
  box-shadow:0 8px 20px rgba(0,0,0,.22);
}

body.page-help .brand-mark svg{
  width:24px;
  height:24px;
}

body.page-help .brand-title h1{
  margin:0;
  font-size:34px;
  line-height:1;
  letter-spacing:-.03em;
  background:linear-gradient(90deg, #0df2cc 0%, #7ef8e8 58%, #0df2cc 100%);
  -webkit-background-clip:text;
  background-clip:text;
  color:transparent;
}

body.page-help .view-nav.top-nav-inline{
  width:100%;
  margin:0;
  padding:0;
  border:none;
  background:transparent;
  box-shadow:none;
  display:flex;
  flex-wrap:nowrap;
  align-items:center;
  justify-content:center;
  gap:16px;
}

body.page-help .view-nav.top-nav-inline .view-tab{
  text-decoration:none;
  min-height:0;
  padding:0 0 6px;
  border:none;
  border-radius:0;
  color:rgba(184,212,204,.76);
  background:transparent;
  font-size:14px;
  font-weight:700;
  position:relative;
}

body.page-help .view-nav.top-nav-inline .view-tab::after{
  content:"";
  position:absolute;
  left:0;
  right:0;
  bottom:-1px;
  height:2px;
  border-radius:999px;
  background:transparent;
  transition:background .15s ease;
}

body.page-help .view-nav.top-nav-inline .view-tab:hover{
  color:var(--text);
}

body.page-help .view-nav.top-nav-inline .view-tab:hover::after{
  background:linear-gradient(90deg, var(--brand), var(--brand2));
}

body.page-help .menu-toggle{
  display:none;
  margin-left:0;
}

body.page-help .actions.top-actions-compact{
  width:auto;
  margin-left:0;
  display:flex;
  align-items:center;
  gap:8px;
  flex-wrap:nowrap;
}

body.page-help .actions.top-actions-compact .top-menu-link{
  display:none;
}

body.page-help .actions.top-actions-compact .top-tool-btn{
  width:40px;
  min-width:40px;
  height:40px;
  min-height:40px;
  padding:0;
  border-radius:10px;
  justify-content:center;
  position:relative;
}

body.page-help .actions.top-actions-compact .top-tool-btn svg{
  width:18px;
  height:18px;
}

body.page-help .actions.top-actions-compact .top-tool-btn .btn-label{
  position:absolute;
  width:1px;
  height:1px;
  padding:0;
  margin:-1px;
  overflow:hidden;
  clip:rect(0, 0, 0, 0);
  white-space:nowrap;
  border:0;
}

body.page-help .help-wrap{
  padding-top:16px;
}

@media (max-width: 1080px){
  body.page-help .head{
    grid-template-columns:auto minmax(0, 1fr) auto;
  }

  body.page-help .view-nav.top-nav-inline{
    gap:12px;
    justify-content:flex-start;
    overflow-x:auto;
    padding-bottom:2px;
  }

  body.page-help .view-nav.top-nav-inline::-webkit-scrollbar{
    height:0;
  }
}

@media (max-width: 920px){
  body.page-help .head{
    grid-template-columns:minmax(0, 1fr) auto;
    align-items:center;
    gap:8px;
  }

  body.page-help .view-nav.top-nav-inline{
    display:none;
  }

  body.page-help .menu-toggle{
    display:inline-flex;
    margin-left:auto;
  }

  body.page-help .actions.top-actions-compact{
    display:none;
    grid-column:1 / -1;
    width:100%;
    flex-direction:column;
    align-items:stretch;
    gap:8px;
    padding:10px;
    border:1px solid rgba(13,242,204,.18);
    border-radius:12px;
    background:linear-gradient(180deg, rgba(8,28,24,.72), rgba(6,20,18,.6));
    box-shadow:0 10px 22px rgba(0,0,0,.24);
  }

  body.page-help .actions.top-actions-compact.is-open{
    display:flex;
  }

  body.page-help .actions.top-actions-compact .top-menu-link{
    display:flex;
    width:100%;
    justify-content:flex-start;
  }

  body.page-help .actions.top-actions-compact .top-tool-btn{
    width:100%;
    min-width:0;
    height:40px;
    min-height:40px;
    padding:0 12px;
    justify-content:flex-start;
    border-radius:10px;
    gap:8px;
  }

  body.page-help .actions.top-actions-compact .top-tool-btn .btn-label{
    position:static;
    width:auto;
    height:auto;
    margin:0;
    overflow:visible;
    clip:auto;
    white-space:normal;
  }
}

@media (max-width: 430px){
  body.page-help .brand-mark{
    width:40px;
    height:40px;
  }

  body.page-help .brand-title h1{
    font-size:30px;
  }

  body.page-help .menu-toggle{
    height:40px;
    border-radius:11px;
    padding:0 11px;
    font-size:12px;
  }
}

:root[data-theme="light"] body.page-help .view-nav.top-nav-inline .view-tab{
  color:rgba(61,83,109,.82);
}

:root[data-theme="light"] body.page-help .view-nav.top-nav-inline .view-tab:hover{
  color:#0f172a;
}

:root[data-theme="light"] body.page-help .actions.top-actions-compact .top-tool-btn{
  border-color:rgba(15,23,42,.14);
  background:linear-gradient(180deg, rgba(255,255,255,.92), rgba(246,250,255,.86));
  color:#0f172a;
}

/* ---------- Home overview layout (KPIs first + analysis sidebar) ---------- */
body.page-index .home-overview{
  display:grid;
  grid-template-columns:minmax(0, 1fr) minmax(280px, 340px);
  align-items:stretch;
  gap:12px;
  margin-top:4px;
}

body.page-index .home-main{
  min-width:0;
}

body.page-index .home-main-panel{
  height:100%;
  display:flex;
  flex-direction:column;
  gap:12px;
  padding:14px;
}

body.page-index .home-main-panel .trend-line{
  margin-top:0;
}

body.page-index .home-side{
  min-width:0;
}

body.page-index .home-side .summary-bar{
  margin:0;
  height:100%;
  display:flex;
  flex-direction:column;
  border-style:solid;
}

body.page-index .home-side .summary-controls{
  display:grid;
  grid-template-columns:1fr;
  align-items:stretch;
  gap:8px;
}

body.page-index .home-side .summary-range-fields{
  grid-template-columns:1fr;
}

body.page-index .home-side .summary-controls .field{
  width:100%;
}

body.page-index .home-side .summary-controls .btn{
  width:100%;
  justify-content:center;
}

body.page-index .home-side .summary-caption{
  line-height:1.35;
}

body.page-index .trend-delta-label{
  display:block;
  margin-bottom:6px;
  font-weight:700;
  color:rgba(220,248,241,.92);
}

body.page-index .trend-delta-list{
  margin:0;
  padding-left:18px;
}

body.page-index .trend-delta-item{
  color:rgba(216,235,229,.94);
  line-height:1.35;
}

body.page-index .trend-delta-item + .trend-delta-item{
  margin-top:2px;
}

@media (max-width: 1200px){
  body.page-index .home-overview{
    grid-template-columns:1fr;
  }

  body.page-index .home-main-panel{
    height:auto;
  }

  body.page-index .home-side .summary-bar{
    height:auto;
  }
}

:root[data-theme="light"] body.page-index .home-main-panel{
  border-color:#dce5ef;
  background:linear-gradient(180deg, #ffffff, #f7fbff);
}

:root[data-theme="light"] body.page-index .trend-delta-label{
  color:#0f172a;
  font-weight:800;
}

:root[data-theme="light"] body.page-index .trend-delta-item{
  color:#334155;
}

/* =========================
   Mini-sprint #1 (BQA-001)
   Modal workout scroll lock
========================= */
html.modal-open,
body.modal-open{
  overflow:hidden;
}

#workoutModal{
  max-height:calc(100vh - 24px);
}

#workoutModal[open]{
  display:flex;
  flex-direction:column;
}

#workoutModal .modal-head{
  flex:0 0 auto;
}

#workForm.modal-body{
  flex:1 1 auto;
  min-height:0;
  display:flex;
  flex-direction:column;
  overflow:hidden;
}

#workoutModal .work-grid{
  flex:1 1 auto;
  min-height:0;
  overflow-y:auto;
  overflow-x:hidden;
  -webkit-overflow-scrolling:touch;
  align-content:start;
  padding-right:4px;
}

#workoutModal .modal-actions{
  flex:0 0 auto;
}

@media (max-width: 560px){
  #workoutModal{
    max-height:calc(100vh - 16px);
  }
}

/* =========================
   Mini-sprint #3 (P1-B)
========================= */
body.page-index .plan-card-title{
  display:flex;
  align-items:center;
  gap:6px;
  min-width:0;
}

body.page-index .plan-card-tip{
  width:20px;
  height:20px;
  font-size:10px;
  border-color:rgba(13,242,204,.34);
}

body.page-index .plan-adherence-period{
  font-size:12px;
  color:rgba(184,218,210,.88);
}

.plan-import-feedback{
  border:1px solid rgba(255,255,255,.14);
  border-radius:12px;
  background:rgba(255,255,255,.03);
  padding:12px;
  display:grid;
  gap:10px;
}

.plan-import-human p{
  margin:0;
  font-size:12px;
  line-height:1.4;
  color:rgba(201,229,221,.9);
}

.plan-import-groups{
  display:grid;
  gap:8px;
}

.plan-import-group-item{
  border:1px solid rgba(255,255,255,.11);
  border-radius:10px;
  background:rgba(255,255,255,.02);
  padding:10px;
  display:grid;
  gap:6px;
}

.plan-import-group-item.is-error{
  border-color:rgba(255,77,125,.38);
  background:rgba(255,77,125,.08);
}

.plan-import-group-item.is-warn{
  border-color:rgba(245,158,11,.36);
  background:rgba(245,158,11,.08);
}

.plan-import-group-head{
  display:flex;
  align-items:center;
  gap:8px;
  flex-wrap:wrap;
  color:#e9f7f3;
  font-size:12px;
}

.plan-import-group-pill{
  border:1px solid rgba(255,255,255,.2);
  border-radius:999px;
  padding:2px 8px;
  font-size:11px;
  font-weight:900;
}

.plan-import-group-meta{
  font-size:11px;
  color:rgba(199,225,219,.82);
}

.plan-import-group-action{
  font-size:12px;
  color:rgba(220,240,235,.94);
}

.plan-import-detail-wrap{
  max-height:250px;
  overflow:auto;
}

.plan-import-detail-wrap table{
  min-width:920px;
}

.plan-import-guide{
  border:1px dashed rgba(255,255,255,.2);
  border-radius:12px;
  padding:12px;
  background:rgba(255,255,255,.02);
}

.plan-import-guide h4{
  margin:0 0 8px;
  font-size:14px;
}

.plan-import-guide ul{
  margin:0;
  padding-left:18px;
  display:grid;
  gap:6px;
  font-size:12px;
  color:rgba(204,231,223,.9);
}

.plan-import-ai-note{
  margin:0;
  font-size:12px;
  line-height:1.4;
  color:rgba(202,229,222,.9);
}

.plan-ai-workflow-modal{
  width:min(1040px, 96vw);
}

.plan-ai-workflow-body{
  display:grid;
  gap:14px;
}

.plan-ai-prompt{
  width:100%;
  min-height:190px;
  resize:vertical;
  border-radius:10px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(255,255,255,.03);
  color:#d7ece6;
  padding:10px 12px;
  font-size:12px;
  line-height:1.4;
}

.plan-ai-workflow-body .plan-import-block .field{
  margin-bottom:8px;
}

.plan-ai-workflow-body .plan-import-block .btn.primary{
  margin-bottom:10px;
}

.footer-view-actions{
  display:flex;
  align-items:center;
  gap:8px;
  flex-wrap:wrap;
}

.footer-view-actions .footer-export-btn{
  display:none;
  height:38px;
  padding:0 12px;
  font-size:12px;
}

body.page-index[data-active-view="checkin"] .footer-view-actions .footer-export-btn[data-footer-view="checkin"],
body.page-index[data-active-view="workouts"] .footer-view-actions .footer-export-btn[data-footer-view="workouts"],
body.page-index[data-active-view="supplements"] .footer-view-actions .footer-export-btn[data-footer-view="supplements"]{
  display:inline-flex;
}

:root[data-theme="light"] body.page-index .plan-adherence-period{
  color:#4d6282;
}

:root[data-theme="light"] .plan-import-feedback{
  border-color:#d8e6f1;
  background:#f7fbff;
}

:root[data-theme="light"] .plan-import-human p{
  color:#415875;
}

:root[data-theme="light"] .plan-import-group-item{
  border-color:#dbe8f3;
  background:#ffffff;
}

:root[data-theme="light"] .plan-import-group-item.is-error{
  border-color:rgba(244,63,94,.28);
  background:rgba(244,63,94,.08);
}

:root[data-theme="light"] .plan-import-group-item.is-warn{
  border-color:rgba(245,158,11,.3);
  background:rgba(245,158,11,.08);
}

:root[data-theme="light"] .plan-import-group-head{
  color:#203047;
}

:root[data-theme="light"] .plan-import-group-meta{
  color:#4c6383;
}

:root[data-theme="light"] .plan-import-group-action{
  color:#324b69;
}

:root[data-theme="light"] .plan-import-guide{
  border-color:#d4e4ef;
  background:#f8fbff;
}

:root[data-theme="light"] .plan-import-guide ul{
  color:#405776;
}

:root[data-theme="light"] .plan-import-ai-note{
  color:#4a607f;
}

:root[data-theme="light"] .plan-import-legal{
  background:rgba(254,242,242,.95);
  border-color:#fecaca;
}

:root[data-theme="light"] .plan-import-legal .plan-disclaimer{
  color:#5b2735;
}

:root[data-theme="light"] .plan-ai-prompt{
  border-color:#d2e1ee;
  background:#f8fbff;
  color:#2b4568;
}

@media (max-width: 900px){
  .footer-view-actions{
    width:100%;
    order:2;
  }

  .footer-view-actions .footer-export-btn{
    width:100%;
    justify-content:center;
  }
}
